[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nmeteorInstall = Package.modules.meteorInstall;\nPromise = Package.promise.Promise;\n_ = Package.underscore._;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"chat\":{\"ChatContainer.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/ChatContainer.js                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\n\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 1);\nmodule.export({\n  default: () => ChatContainer\n});\nmodule.link(\"./style.less\");\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet Footer;\nmodule.link(\"./Footer\", {\n  default(v) {\n    Footer = v;\n  }\n\n}, 2);\nlet Message;\nmodule.link(\"./Message\", {\n  default(v) {\n    Message = v;\n  }\n\n}, 3);\nlet Messages;\nmodule.link(\"./Messages\", {\n  default(v) {\n    Messages = v;\n  }\n\n}, 4);\nlet ChatHeader;\nmodule.link(\"./ChatHeader\", {\n  default(v) {\n    ChatHeader = v;\n  }\n\n}, 5);\nlet ErrorBoundary;\nmodule.link(\"./ErrorBoundary\", {\n  default(v) {\n    ErrorBoundary = v;\n  }\n\n}, 6);\n\nclass ChatContainer extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isActive: true,\n      isOpen: true\n    };\n\n    this.onTitleClick = () => {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    };\n\n    this.onXClick = () => {\n      const {\n        customKey,\n        onCloseChat\n      } = this.props;\n      onCloseChat(customKey); // this.setState({ isActive: !this.state.isActive})\n    };\n\n    this.onNewMessage = msg => {\n      const {\n        onNewMessage,\n        scope,\n        customKey\n      } = this.props;\n\n      if (onNewMessage) {\n        msg = onNewMessage(msg);\n\n        if (!msg) {\n          return;\n        }\n      }\n\n      scope.append(customKey, msg);\n    };\n\n    this.componentDidMount = () => {\n      const {\n        dockStartOpen,\n        docked\n      } = this.props;\n\n      if (docked && !dockStartOpen) {\n        this.setState({\n          isOpen: false\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      isOpen\n    } = this.state;\n\n    const _this$props = this.props,\n          {\n      player,\n      scope,\n      customKey,\n      customClassName,\n      docked,\n      onIncomingMessage,\n      filter,\n      timeStamp,\n      otherPlayer,\n      header: HeaderComp,\n      message: MessageComp,\n      footer: FooterComp,\n      isActive,\n      onCloseChat\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"player\", \"scope\", \"customKey\", \"customClassName\", \"docked\", \"onIncomingMessage\", \"filter\", \"timeStamp\", \"otherPlayer\", \"header\", \"message\", \"footer\", \"isActive\", \"onCloseChat\"]);\n\n    const common = {\n      player,\n      scope,\n      customKey\n    };\n\n    if (!isActive) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(customClassName ? customClassName : \"empirica-chat-container\", \" \").concat(docked ? \"undocked\" : \"undocked\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat \".concat(isOpen ? \"open\" : \"\")\n    }, docked && /*#__PURE__*/React.createElement(HeaderComp, _extends({}, common, {\n      otherPlayer: otherPlayer,\n      onTitleClick: this.onTitleClick,\n      onXClick: this.onXClick,\n      isOpen: isOpen\n    })), isOpen ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Messages, _extends({}, common, {\n      messageComp: MessageComp,\n      filter: filter,\n      onIncomingMessage: onIncomingMessage\n    }, rest)), /*#__PURE__*/React.createElement(FooterComp, _extends({}, common, {\n      timeStamp: timeStamp,\n      onNewMessage: this.onNewMessage\n    }))) : \"\")));\n  }\n\n}\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  // header: ({ onClick, isOpen }) => (\n  //   <div className=\"header\">\n  //     <span className=\"title\">CHAT </span>\n  //     <span className=\"close-button\" onClick={onClick}>\n  //       {isOpen ? \"-\" : \"+\"}\n  //     </span>\n  //   </div>\n  // ),\n  header: ChatHeader,\n  message: Message,\n  footer: Footer\n};\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ChatHeader.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/ChatHeader.js                                                                                        //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => ChatHeader\n});\nmodule.link(\"./style.less\");\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass ChatHeader extends React.PureComponent {\n  render() {\n    const {\n      otherPlayer,\n      onTitleClick,\n      onXClick,\n      isOpen\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title\",\n      onClick: onTitleClick\n    }, \" \", otherPlayer, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"close-button\",\n      onClick: onXClick\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/icon-net-window-close.png\",\n      width: \"17px\",\n      height: \"17px\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ErrorBoundary.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/ErrorBoundary.js                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => ErrorBoundary\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return {\n      hasError: true\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(\"error on chat package \", error);\n    console.error(\"error on chat package:info \", errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return /*#__PURE__*/React.createElement(\"h1\", null, \"Something went wrong.\");\n    }\n\n    return this.props.children;\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Footer.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Footer.js                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  default: () => Footer\n});\nmodule.link(\"./style.less\");\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nclass Footer extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comment: \"\",\n      rows: 1,\n      minRows: 1,\n      maxRows: 5,\n      buttonHeight: 30\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const text = this.state.comment.trim();\n\n      if (text === \"\") {\n        return;\n      }\n\n      const {\n        player,\n        onNewMessage,\n        timeStamp\n      } = this.props;\n      let msg = {\n        text,\n        player: {\n          _id: player._id,\n          avatar: player.get(\"avatar\"),\n          name: player.get(\"name\") || player._id\n        }\n      };\n\n      if (timeStamp) {\n        msg = _objectSpread({}, msg, {\n          timeStamp\n        });\n      }\n\n      onNewMessage(msg);\n      this.setState({\n        comment: \"\"\n      });\n    };\n\n    this.handleChange = e => {\n      const el = e.currentTarget;\n      const textareaLineHeight = 24;\n      const {\n        minRows,\n        maxRows\n      } = this.state;\n      const previousRows = e.target.rows;\n      e.target.rows = minRows; // reset number of rows in textarea\n\n      const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n      if (currentRows === previousRows) {\n        e.target.rows = currentRows;\n      }\n\n      if (currentRows >= maxRows) {\n        e.target.rows = maxRows;\n        e.target.scrollTop = e.target.scrollHeight;\n      }\n\n      const usedRows = currentRows < maxRows ? currentRows : maxRows;\n      this.setState({\n        [el.name]: el.value,\n        rows: usedRows\n      }, () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      comment,\n      rows,\n      buttonHeight\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      className: \"chat-footer-form\",\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-footer\"\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"chat-input\",\n      name: \"comment\",\n      className: \"chat-input\",\n      placeholder: \"My message\",\n      value: comment,\n      onKeyPress: e => {\n        if (e.key === \"Enter\") {\n          this.handleSubmit(e);\n        }\n      },\n      rows: rows,\n      onChange: this.handleChange,\n      autoComplete: \"off\"\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      form: \"chat-input\",\n      className: \"chat-button-send\",\n      disabled: !comment,\n      onClick: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/icon-enter.png\",\n      width: \"15px\",\n      height: \"17px\"\n    })));\n  }\n\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date)\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Message.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Message.js                                                                                           //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Message\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet isString;\nmodule.link(\"lodash\", {\n  isString(v) {\n    isString = v;\n  }\n\n}, 2);\n\nclass Message extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.renderTime = timeStamp => {\n      const hours = new Date(timeStamp).getHours();\n      const minutes = new Date(timeStamp).getMinutes();\n\n      if (!hours || !minutes) {\n        return null;\n      }\n\n      const time = \"\".concat(hours.toString().padStart(2, 0), \":\").concat(minutes.toString().padStart(2, 0));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"timeStamp\"\n      }, time);\n    };\n\n    this.renderName = (isSelf, name) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"name\"\n      }, isSelf ? \"You\" : name);\n    };\n  }\n\n  render() {\n    const {\n      message,\n      player,\n      hideName,\n      hideAvatar,\n      svgAvatar,\n      avatar\n    } = this.props;\n    const {\n      player: msgPlayer,\n      text,\n      timeStamp\n    } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar);\n\n    if (useAvatar && avatar) {\n      if (isString(avatar)) {\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\");\n        avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n          className: \"avatar\",\n          alt: '',\n          src: avatar\n        });\n      } else {\n        const avatarSrc = avatar.svg || avatar.src;\n\n        if (avatar.svg) {\n          avatarImg = /*#__PURE__*/React.createElement(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: avatarSrc\n            },\n            className: \"avatar\"\n          });\n        } else {\n          avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n            className: \"avatar\",\n            alt: avatar.alt,\n            src: avatar.src\n          });\n        }\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", null, !isSelf ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"other-message-tick-container\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/net-bubble.png\",\n      width: \"15px\",\n      height: \"10px\"\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-container-other\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text\"\n    }, text))) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-container-self\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text\"\n    }, text)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"self-message-tick-container\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/my-bubble.png\",\n      width: \"15px\",\n      height: \"10px\"\n    }))));\n  }\n\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string\n    })\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg: PropTypes.string,\n    src: PropTypes.string,\n    alt: PropTypes.string\n  })\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Messages.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Messages.js                                                                                          //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 0);\n\nlet _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nfunction filteredMessages(WrappedComponent) {\n  return class extends React.Component {\n    render() {\n      const {\n        scope,\n        customKey,\n        filter\n      } = this.props;\n      let messages = scope.get(customKey) || [];\n\n      if (filter) {\n        messages = filter(messages);\n      }\n\n      return /*#__PURE__*/React.createElement(WrappedComponent, _extends({\n        messages: [...messages]\n      }, this.props));\n    }\n\n  };\n}\n\nclass Messages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.messagesEl = React.createRef();\n    this.state = {\n      messageLength: 0\n    };\n  }\n\n  componentDidMount() {\n    this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n    this.setState({\n      messageLength: this.props.messages.length\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      messageLength\n    } = this.state;\n    const {\n      messages: currentMessages,\n      onIncomingMessage,\n      customKey\n    } = this.props;\n\n    if (this.messagesEl.current !== null && currentMessages.length > messageLength) {\n      this.setState({\n        messageLength: currentMessages.length\n      }, () => {\n        if (onIncomingMessage) {\n          onIncomingMessage(currentMessages.splice(this.state.messageLength), customKey);\n        }\n\n        this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      player,\n      messages,\n      messageComp: MessageComp\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"player\", \"messages\", \"messageComp\"]);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messages\",\n      ref: this.messagesEl\n    }, messages.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"empty\"\n    }, \"No messages yet...\") : null, messages.map((message, i) => {\n      return /*#__PURE__*/React.createElement(MessageComp, _extends({\n        key: i,\n        message: message,\n        player: player\n      }, rest));\n    }));\n  }\n\n}\n\nMessages.propTypes = {\n  player: PropTypes.object,\n  messageComp: PropTypes.elementType,\n  filter: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customKey: PropTypes.string\n};\nmodule.exportDefault(filteredMessages(Messages));\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"style.less\":function module(){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/style.less                                                                                           //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\n// These styles have already been applied to the document.\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"exit\":{\"ExitSurvey.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/ExitSurvey.jsx                                                                                       //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => ExitSurvey\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nconst Radio = (_ref) => {\n  let {\n    selected,\n    name,\n    value,\n    label,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"label\", null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    name: name,\n    value: value,\n    checked: selected === value,\n    onChange: onChange\n  }), label);\n};\n\nclass ExitSurvey extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      age: \"\",\n      gender: \"\",\n      strength: \"\",\n      fair: \"\",\n      feedback: \"\"\n    };\n\n    this.handleChange = event => {\n      const el = event.currentTarget;\n      this.setState({\n        [el.name]: el.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.props.onSubmit(this.state);\n    };\n  }\n\n  render() {\n    const {\n      player\n    } = this.props;\n    const {\n      age,\n      gender,\n      strength,\n      fair,\n      feedback,\n      education\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"exit-survey\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Exit Survey \"), /*#__PURE__*/React.createElement(\"p\", null, \"Please submit the following code to receive your bonus:\", \" \", /*#__PURE__*/React.createElement(\"strong\", null, player._id), \".\"), /*#__PURE__*/React.createElement(\"p\", null, \"You final \", /*#__PURE__*/React.createElement(\"strong\", null, \"bonus\"), \" is in addition of the\", \" \", /*#__PURE__*/React.createElement(\"strong\", null, \"1 base reward\"), \" for completing the HIT.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Please answer the following short survey. You do not have to provide any information you feel uncomfortable with.\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-line\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"age\"\n    }, \"Age\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"age\",\n      type: \"number\",\n      min: \"0\",\n      max: \"150\",\n      step: \"1\",\n      dir: \"auto\",\n      name: \"age\",\n      value: age,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"gender\"\n    }, \"Gender\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"gender\",\n      type: \"text\",\n      dir: \"auto\",\n      name: \"gender\",\n      value: gender,\n      onChange: this.handleChange,\n      autoComplete: \"off\"\n    })))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", null, \"Highest Education Qualification\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"high-school\",\n      label: \"High School\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"bachelor\",\n      label: \"US Bachelor's Degree\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"master\",\n      label: \"Master's or higher\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"other\",\n      label: \"Other\",\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-line thirds\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"strength\"\n    }, \"How would you describe your strength in the game?\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"strength\",\n      name: \"strength\",\n      value: strength,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"fair\"\n    }, \"Do you feel the pay was fair?\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"fair\",\n      name: \"fair\",\n      value: fair,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"feedback\"\n    }, \"Feedback, including problems you encountered.\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"feedback\",\n      name: \"feedback\",\n      value: feedback,\n      onChange: this.handleChange\n    })))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\"))));\n  }\n\n}\n\nExitSurvey.stepName = \"ExitSurvey\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Sorry.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/Sorry.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Sorry\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 2);\n\nclass Sorry extends Component {\n  render() {\n    const {\n      player,\n      game\n    } = this.props;\n    let msg;\n\n    switch (player.exitStatus) {\n      case \"gameFull\":\n        msg = \"All games you are eligible for have filled up too fast...\";\n        break;\n\n      case \"gameLobbyTimedOut\":\n        msg = \"There were NOT enough players for the game to start...\";\n        break;\n\n      case \"playerEndedLobbyWait\":\n        msg = \"You decided to stop waiting, we are sorry it was too long a wait.\";\n        break;\n\n      default:\n        msg = \"Unfortunately the Game was cancelled...\";\n        break;\n    }\n\n    if (player.exitReason === \"failedQuestion\") {\n      msg = \"Unfortunately you did not meet the conditions required to play the game.\";\n    } // Only for dev\n\n\n    if (!game && Meteor.isDevelopment) {\n      msg = \"Unfortunately the Game was cancelled because of failed to init Game (only visible in development, check the logs).\";\n    }\n\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h4\", null, \"Sorry!\"), /*#__PURE__*/React.createElement(\"p\", null, \"Sorry, you were not able to play today! \", msg), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"Please contact the researcher to see if there are more games available.\"))));\n  }\n\n}\n\nSorry.stepName = \"Sorry\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Thanks.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/Thanks.jsx                                                                                           //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Thanks\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass Thanks extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"finished\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h4\", null, \"Finished!\"), /*#__PURE__*/React.createElement(\"p\", null, \"Thank you for participating!\")));\n  }\n\n}\n\nThanks.stepName = \"Thanks\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"game\":{\"About.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/About.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => About\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass About extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, \"Here be the presentation of the experiement(ers).\");\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"MyNetwork.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/MyNetwork.jsx                                                                                        //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => MyNetwork\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PlayerTab;\nmodule.link(\"./PlayerTab\", {\n  default(v) {\n    PlayerTab = v;\n  }\n\n}, 1);\n\nclass MyNetwork extends React.Component {\n  render() {\n    const {\n      game,\n      stage,\n      round,\n      player,\n      onOpenChat\n    } = this.props;\n    const network = player.get(\"neighbors\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"network-container\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"network-header\"\n    }, \" MY NETWORK\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"network-all-players-container\"\n    }, network.map(otherNodeId => {\n      // const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id;\n      return /*#__PURE__*/React.createElement(PlayerTab, {\n        game: game,\n        otherPlayerNodeId: otherNodeId,\n        openChat: onOpenChat\n      });\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PlayerProfile.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/PlayerProfile.jsx                                                                                    //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => PlayerProfile\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Timer;\nmodule.link(\"./Timer.jsx\", {\n  default(v) {\n    Timer = v;\n  }\n\n}, 1);\n\nclass PlayerProfile extends React.Component {\n  renderProfile() {\n    const {\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-score\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Your Profile\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: player.get(\"avatar\"),\n      className: \"profile-avatar\"\n    }));\n  }\n\n  renderScore() {\n    const {\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-score\"\n    }, /*#__PURE__*/React.createElement(\"h4\", null, \"Total score\"), /*#__PURE__*/React.createElement(\"span\", null, (player.get(\"score\") || 0).toFixed(2)));\n  }\n\n  render() {\n    const {\n      stage\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"aside\", {\n      className: \"player-profile\"\n    }, this.renderProfile(), this.renderScore(), /*#__PURE__*/React.createElement(Timer, {\n      stage: stage\n    }));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PlayerTab.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/PlayerTab.jsx                                                                                        //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => PlayerTab\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass PlayerTab extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.handleOpenChat = () => {\n      console.log(this.props);\n      const {\n        otherPlayerNodeId,\n        openChat\n      } = this.props;\n      openChat(otherPlayerNodeId);\n    };\n  }\n\n  render() {\n    const {\n      game,\n      otherPlayerNodeId,\n      openChat\n    } = this.props;\n    const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherPlayerNodeId)).id;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"network-player-container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"network-name-container\",\n      onClick: this.handleOpenChat\n    }, otherPlayerId), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"network-avatar-container\"\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/icon-profile-white.png\",\n      width: \"25px\",\n      height: \"25px\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Results.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Results.jsx                                                                                          //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Round\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass Round extends React.Component {\n  render() {\n    const {\n      stage,\n      round,\n      game\n    } = this.props;\n    const result = round.get(\"result\");\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \" Your team was \", result ? \"CORRECT\" : \"INCORRECT\", \" !\"));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Round.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Round.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Round\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PlayerProfile;\nmodule.link(\"./PlayerProfile.jsx\", {\n  default(v) {\n    PlayerProfile = v;\n  }\n\n}, 1);\nlet SocialExposure;\nmodule.link(\"./SocialExposure.jsx\", {\n  default(v) {\n    SocialExposure = v;\n  }\n\n}, 2);\nlet MyNetwork;\nmodule.link(\"./MyNetwork.jsx\", {\n  default(v) {\n    MyNetwork = v;\n  }\n\n}, 3);\nlet StageResult;\nmodule.link(\"./StageResult.jsx\", {\n  default(v) {\n    StageResult = v;\n  }\n\n}, 4);\nlet Results;\nmodule.link(\"./Results.jsx\", {\n  default(v) {\n    Results = v;\n  }\n\n}, 5);\nlet Task;\nmodule.link(\"./Task.jsx\", {\n  default(v) {\n    Task = v;\n  }\n\n}, 6);\nlet Timer;\nmodule.link(\"./Timer.jsx\", {\n  default(v) {\n    Timer = v;\n  }\n\n}, 7);\n\nclass Round extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onOpenChat = otherPlayerNodeId => {\n      const {\n        player\n      } = this.props;\n      var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherPlayerNodeId)];\n      pairOfPlayers.sort((p1, p2) => p1 - p2);\n      var customKey = \"\".concat(pairOfPlayers[0], \"-\").concat(pairOfPlayers[1]);\n      console.log(this.state);\n      console.log(this.state.activeChats);\n\n      if (!this.state.activeChats.includes(customKey)) {\n        this.state.activeChats.push(customKey);\n      }\n\n      console.log(this.state);\n    };\n\n    this.onCloseChat = customKey => {\n      const newActiveChats = this.state.activeChats.filter(chat => chat !== customKey);\n      this.setState({\n        activeChats: newActiveChats\n      });\n      console.log(this.state);\n    };\n\n    this.state = {\n      activeChats: []\n    };\n  }\n\n  render() {\n    const {\n      stage,\n      round,\n      player,\n      game\n    } = this.props; // const showResults = stage.get(\"showResults\");\n    // if (showResults) {\n    //   const result = stage.get(\"result\")\n    //   return (\n    //   <div>\n    //     <StageResult stage={stage} showResults={showResults} result={result} timer={10}/>\n    //   </div>\n    //   )\n    // }\n\n    if (stage.name === \"Result\") {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Results, {\n        game: game,\n        round: round,\n        stage: stage\n      }), /*#__PURE__*/React.createElement(Timer, {\n        stage: stage\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"round\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"task-network-container\"\n      }, /*#__PURE__*/React.createElement(Task, {\n        game: game,\n        round: round,\n        stage: stage,\n        player: player\n      }), /*#__PURE__*/React.createElement(MyNetwork, {\n        game: game,\n        round: round,\n        stage: stage,\n        player: player,\n        onOpenChat: otherPlayerNodeId => this.onOpenChat(otherPlayerNodeId)\n      })), /*#__PURE__*/React.createElement(SocialExposure, {\n        game: game,\n        round: round,\n        stage: stage,\n        player: player,\n        onCloseChat: customKey => this.onCloseChat(customKey),\n        activeChats: this.state.activeChats\n      })));\n    }\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SocialExposure.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/SocialExposure.jsx                                                                                   //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => SocialExposure\n});\nmodule.link(\"../chat/style.less\");\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Chat;\nmodule.link(\"@empirica/chat\", {\n  Chat(v) {\n    Chat = v;\n  }\n\n}, 1);\nlet ChatContainer;\nmodule.link(\"../chat/ChatContainer.js\", {\n  default(v) {\n    ChatContainer = v;\n  }\n\n}, 2);\nlet Message;\nmodule.link(\"../chat/Message.js\", {\n  default(v) {\n    Message = v;\n  }\n\n}, 3);\nlet Footer;\nmodule.link(\"../chat/Footer.js\", {\n  default(v) {\n    Footer = v;\n  }\n\n}, 4);\nlet TimeSync;\nmodule.link(\"meteor/mizzao:timesync\", {\n  TimeSync(v) {\n    TimeSync = v;\n  }\n\n}, 5);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 6);\nlet Slider;\nmodule.link(\"meteor/empirica:slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 7);\n\nclass SocialExposure extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.logIncomingMessage = (msgs, customKey) => {\n      const {\n        game,\n        round,\n        stage,\n        player\n      } = this.props;\n      const messages = round.get(\"\".concat(customKey));\n      const mostRecentMsg = messages[messages.length - 1];\n      const receiver = mostRecentMsg.player._id; // onIncomingMessage logs the message for both sender and receiver\n      // Only log one copy of the message\n\n      if (player._id === receiver) {\n        stage.append(\"log\", {\n          verb: \"messageLog\",\n          subjectId: player.id,\n          object: mostRecentMsg,\n          at: moment(TimeSync.serverTime(null, 1000))\n        });\n      }\n    };\n  }\n\n  renderSocialInteraction(otherPlayer) {\n    const value = otherPlayer.round.get(\"value\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alter\",\n      key: otherPlayer._id\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: otherPlayer.get(\"avatar\"),\n      className: \"profile-avatar\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"range\"\n    }, /*#__PURE__*/React.createElement(Slider, {\n      min: 0,\n      max: 1,\n      stepSize: 0.01,\n      value: value,\n      disabled: true,\n      hideHandleOnEmpty: true\n    })));\n  }\n\n  render() {\n    const {\n      game,\n      round,\n      player,\n      onCloseChat,\n      activeChats\n    } = this.props;\n    const network = player.get(\"neighbors\"); // reactive time value only updates at 1000 ms\n\n    const timeStamp = new Date(TimeSync.serverTime(null, 1000));\n\n    if (network.length === 0) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"all-chats-container\"\n    }, network.map(otherNodeId => {\n      var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherNodeId)];\n      pairOfPlayers.sort((p1, p2) => p1 - p2);\n      const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id;\n      const chatKey = \"\".concat(pairOfPlayers[0], \"-\").concat(pairOfPlayers[1]);\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(ChatContainer, {\n        docked: true,\n        key: otherNodeId,\n        player: player,\n        otherPlayer: otherPlayerId,\n        scope: round,\n        timeStamp: timeStamp,\n        customClassName: \"ray-chat-container\",\n        message: Message,\n        footer: Footer,\n        onIncomingMessage: this.logIncomingMessage,\n        customKey: chatKey,\n        isActive: activeChats.includes(chatKey),\n        onCloseChat: onCloseChat\n      }));\n    }));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"StageResult.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/StageResult.jsx                                                                                      //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => StageResult\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass StageResult extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: props.timer\n    };\n  }\n\n  finishDisplay() {\n    const {\n      stage\n    } = this.props;\n    stage.set(\"resultsShown\", true);\n  }\n\n  render() {\n    if (this.props.showResults) {\n      let x = this;\n      let {\n        counter\n      } = this.state;\n      let timer = setTimeout(function () {\n        if (counter > 0) {\n          x.setState({\n            counter: counter - 1\n          });\n        } else {\n          x.finishDisplay(); // x.props.finishDisplay();\n        }\n      }, 1000);\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \" Your team was \", this.props.result ? \"CORRECT\" : \"INCORRECT\", \" !\"), /*#__PURE__*/React.createElement(\"h3\", null, \" SECONDS LEFT: \", this.state.counter, \" \"));\n    } else {\n      return /*#__PURE__*/React.createElement(\"h1\", null, \" TIME UP \");\n    }\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SymbolButton.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/SymbolButton.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => SymbolButton\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass SymbolButton extends React.Component {\n  /* \n    @prop id - id of the symbol\n    @prop name - name of the symbol (TESTING PURPOSES)\n  */\n  constructor(props) {\n    super(props);\n\n    this.handleClick = () => {\n      const {\n        game,\n        player,\n        stage,\n        name,\n        handleButtonSelect\n      } = this.props;\n      player.set(\"symbolSelected\", name);\n      handleButtonSelect(name);\n      console.log(\"\".concat(player.get(\"nodeId\"), \" selected \").concat(name));\n    };\n  } // When button is selected, player sets the id of the button he selected\n\n\n  render() {\n    const {\n      game,\n      stage,\n      player,\n      name,\n      selected\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"symbol-container\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: selected ? \"symbolButtonSelected\" : \"symbolButtonUnselected\",\n      onClick: this.handleClick\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/symbols/tangrams/\".concat(name, \".png\"),\n      height: \"80px\",\n      width: \"80px\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Task.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Task.jsx                                                                                             //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Task\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet TaskResponse;\nmodule.link(\"./TaskResponse\", {\n  default(v) {\n    TaskResponse = v;\n  }\n\n}, 1);\nlet TaskStimulus;\nmodule.link(\"./TaskStimulus\", {\n  default(v) {\n    TaskStimulus = v;\n  }\n\n}, 2);\n\nclass Task extends React.Component {\n  render() {\n    const {\n      stage,\n      player,\n      game\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-container\"\n    }, /*#__PURE__*/React.createElement(TaskResponse, this.props));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TaskResponse.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/TaskResponse.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => TaskResponse\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Slider;\nmodule.link(\"meteor/empirica:slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 1);\nlet TimeSync;\nmodule.link(\"meteor/mizzao:timesync\", {\n  TimeSync(v) {\n    TimeSync = v;\n  }\n\n}, 2);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 3);\nlet SymbolButton;\nmodule.link(\"./SymbolButton.jsx\", {\n  default(v) {\n    SymbolButton = v;\n  }\n\n}, 4);\n\nclass TaskResponse extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props;\n      event.preventDefault();\n      stage.append(\"log\", {\n        verb: \"playerSubmitted\",\n        subjectId: player.id,\n        object: true,\n        at: moment(TimeSync.serverTime(null, 1000))\n      });\n      player.set(\"submitted\", true);\n    };\n\n    this.handleReconsider = event => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props;\n      event.preventDefault();\n      console.log(\"Reconsidering...\");\n      player.set(\"submitted\", false);\n      stage.append(\"log\", {\n        verb: \"playerReconsidered\",\n        subjectId: player.id,\n        object: true,\n        at: moment(TimeSync.serverTime(null, 1000))\n      }); // this.setState({selectedButton: \"\"});\n    };\n\n    this.handleButtonSelect = symbolName => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props; // stage.set(\"selectedButton\", symbolName);\n\n      this.setState({\n        selectedButton: symbolName\n      });\n      stage.append(\"log\", {\n        verb: \"selectingSymbol\",\n        subjectId: player.id,\n        object: symbolName,\n        at: moment(TimeSync.serverTime(null, 1000))\n      });\n    };\n\n    this.state = {\n      selectedButton: props.player.get(\"symbolSelected\") | \"\"\n    };\n  }\n\n  renderSubmitted() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h5\", null, \"Waiting on other players...\"), \"Please wait until all players are ready. If you would like to reconsider your answer, click on the reconsider button.\");\n  }\n\n  renderSlider() {\n    const {\n      player\n    } = this.props;\n    const value = player.round.get(\"value\");\n    return /*#__PURE__*/React.createElement(Slider, {\n      min: 0,\n      max: 1,\n      stepSize: 0.01,\n      labelStepSize: 0.25,\n      onChange: this.handleChange,\n      value: value,\n      hideHandleOnEmpty: true\n    });\n  }\n\n  renderButton() {\n    const {\n      stage,\n      player,\n      game\n    } = this.props; // const task = stage.get(\"task\");\n\n    const selectedSymbol = player.get(\"symbolSelected\");\n    const task = player.get(\"\".concat(stage.displayName));\n    return task.map(symbol => /*#__PURE__*/React.createElement(SymbolButton, {\n      key: symbol,\n      name: symbol,\n      handleButtonSelect: symbolName => this.handleButtonSelect(symbolName),\n      selected: selectedSymbol === symbol,\n      stage: stage,\n      game: game,\n      player: player\n    }));\n  }\n\n  render() {\n    const {\n      stage,\n      round,\n      player,\n      game\n    } = this.props;\n    const selected = player.get(\"symbolSelected\");\n    const submitted = player.get(\"submitted\"); // Create a list of dots to show how many players submitted\n\n    const playersSubmitted = round.get(\"numPlayersSubmitted\");\n    const playersNotSubmitted = game.players.length - playersSubmitted;\n    let filledDots = [];\n    let unfilledDots = [];\n\n    for (let i = 0; i < playersSubmitted; i++) {\n      filledDots.push( /*#__PURE__*/React.createElement(\"span\", {\n        className: \"filled-dot\"\n      }));\n    }\n\n    for (let i = 0; i < playersNotSubmitted; i++) {\n      unfilledDots.push( /*#__PURE__*/React.createElement(\"span\", {\n        className: \"empty-dot\"\n      }));\n    } // If the player already submitted, don't show the slider or submit button\n\n\n    const disabled = player.get(\"submitted\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-header\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"header\"\n    }, \" MY CARD\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"submission-dots-container\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"header\"\n    }, \" SUBMITTED ANSWERS \"), filledDots, unfilledDots)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-body\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"submission-message-container\"\n    }, submitted ? this.renderSubmitted() : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response\"\n    }, this.renderButton())), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-container\"\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      style: {\n        opacity: submitted ? 0 : 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: !selected || submitted ? \"arrow-button button-submit-disabled\" : \"arrow-button button-submit\",\n      disabled: !selected || submitted ? true : false,\n      type: \"submit\"\n    }, \" Submit \")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleReconsider,\n      style: {\n        opacity: !submitted ? 0 : 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"arrow-button button-reconsider\",\n      disabled: !submitted ? true : false\n    }, \" Reconsider \"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TaskStimulus.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/TaskStimulus.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => TaskStimulus\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass TaskStimulus extends React.Component {\n  render() {\n    const {\n      stage,\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-stimulus\"\n    }, \"Work with your teammates to find the common symbol.\");\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Timer.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Timer.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet StageTimeWrapper;\nmodule.link(\"meteor/empirica:core\", {\n  StageTimeWrapper(v) {\n    StageTimeWrapper = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nclass timer extends React.Component {\n  render() {\n    const {\n      remainingSeconds\n    } = this.props;\n    const classes = [\"timer\"];\n\n    if (remainingSeconds <= 5) {\n      classes.push(\"lessThan5\");\n    } else if (remainingSeconds <= 10) {\n      classes.push(\"lessThan10\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.join(\" \")\n    }, /*#__PURE__*/React.createElement(\"h4\", null, \"Timer\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"seconds\"\n    }, remainingSeconds));\n  }\n\n}\n\nmodule.exportDefault(Timer = StageTimeWrapper(timer));\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"intro\":{\"Consent.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/Consent.jsx                                                                                         //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Consent\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered, ConsentButton;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  },\n\n  ConsentButton(v) {\n    ConsentButton = v;\n  }\n\n}, 1);\n\nclass Consent extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"consent\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Consent Form \"), /*#__PURE__*/React.createElement(\"p\", null, \"This experiment is part of a MIT scientific project. Your decision to participate in this experiment is entirely voluntary. There are no known or anticipated risks to participating in this experiment. There is no way for us to identify you. The only information we will have, in addition to your responses, is the timestamps of your interactions with our site. The results of our research may be presented at scientific meetings or published in scientific journals. Clicking on the \\\"AGREE\\\" button indicates that you are at least 18 years of age, and agree to participate voluntary.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(ConsentButton, {\n      text: \"I AGREE\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InstructionStepOne.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/InstructionStepOne.jsx                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => InstructionStepOne\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass InstructionStepOne extends React.Component {\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev,\n      game\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instructions\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Instructions 1 \"), /*#__PURE__*/React.createElement(\"p\", null, \"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio, animi? Quae autem asperiores officiis voluptatum fuga recusandae minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab, veritatis et labore.\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onNext,\n      disabled: !hasNext\n    }, \"Next\"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InstructionStepTwo.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/InstructionStepTwo.jsx                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => InstructionStepTwo\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass InstructionStepTwo extends React.Component {\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instructions\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Instructions 2 \"), /*#__PURE__*/React.createElement(\"p\", null, \"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio, animi? Quae autem asperiores officiis voluptatum fuga recusandae minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab, veritatis et labore.\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onNext,\n      disabled: !hasNext\n    }, \"Next\"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"NewPlayer.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/NewPlayer.jsx                                                                                       //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => NewPlayer\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass NewPlayer extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      id: \"\"\n    };\n\n    this.handleUpdate = event => {\n      const {\n        value,\n        name\n      } = event.currentTarget;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const {\n        handleNewPlayer\n      } = this.props;\n      const {\n        id\n      } = this.state;\n      handleNewPlayer(id);\n    };\n  }\n\n  render() {\n    const {\n      id\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Identification\"), /*#__PURE__*/React.createElement(\"p\", null, \"Please enter your id:\"), /*#__PURE__*/React.createElement(\"input\", {\n      dir: \"auto\",\n      type: \"text\",\n      name: \"id\",\n      id: \"id\",\n      value: id,\n      onChange: this.handleUpdate,\n      required: true,\n      autoComplete: \"off\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\")))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Quiz.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/Quiz.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Quiz\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass Quiz extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      sum: \"\",\n      horse: \"\"\n    };\n\n    this.handleChange = event => {\n      const el = event.currentTarget;\n      this.setState({\n        [el.name]: el.value.trim().toLowerCase()\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.sum !== \"4\" || this.state.horse !== \"white\") {\n        alert(\"Incorrect! Read the instructions, and please try again.\");\n      } else {\n        this.props.onNext();\n      }\n    };\n  }\n\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev\n    } = this.props;\n    const {\n      sum,\n      horse\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quiz\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Quiz \"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"sum\"\n    }, \"What is 2+2?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      dir: \"auto\",\n      id: \"sum\",\n      name: \"sum\",\n      placeholder: \"e.g. 3\",\n      value: sum,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      required: true\n    })), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"horse\"\n    }, \"What color was Napoleon's white horse?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      dir: \"auto\",\n      id: \"horse\",\n      name: \"horse\",\n      placeholder: \"e.g. brown\",\n      value: horse,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      required: true\n    })), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Back to instructions\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\")))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"main.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/main.js                                                                                                   //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet Empirica;\nmodule.link(\"meteor/empirica:core\", {\n  default(v) {\n    Empirica = v;\n  }\n\n}, 0);\nlet render;\nmodule.link(\"react-dom\", {\n  render(v) {\n    render = v;\n  }\n\n}, 1);\nlet ExitSurvey;\nmodule.link(\"./exit/ExitSurvey\", {\n  default(v) {\n    ExitSurvey = v;\n  }\n\n}, 2);\nlet Thanks;\nmodule.link(\"./exit/Thanks\", {\n  default(v) {\n    Thanks = v;\n  }\n\n}, 3);\nlet Sorry;\nmodule.link(\"./exit/Sorry\", {\n  default(v) {\n    Sorry = v;\n  }\n\n}, 4);\nlet About;\nmodule.link(\"./game/About\", {\n  default(v) {\n    About = v;\n  }\n\n}, 5);\nlet Round;\nmodule.link(\"./game/Round\", {\n  default(v) {\n    Round = v;\n  }\n\n}, 6);\nlet Consent;\nmodule.link(\"./intro/Consent\", {\n  default(v) {\n    Consent = v;\n  }\n\n}, 7);\nlet InstructionStepOne;\nmodule.link(\"./intro/InstructionStepOne\", {\n  default(v) {\n    InstructionStepOne = v;\n  }\n\n}, 8);\nlet InstructionStepTwo;\nmodule.link(\"./intro/InstructionStepTwo\", {\n  default(v) {\n    InstructionStepTwo = v;\n  }\n\n}, 9);\nlet Quiz;\nmodule.link(\"./intro/Quiz\", {\n  default(v) {\n    Quiz = v;\n  }\n\n}, 10);\nlet NewPlayer;\nmodule.link(\"./intro/NewPlayer\", {\n  default(v) {\n    NewPlayer = v;\n  }\n\n}, 11);\n// Set the About Component you want to use for the About dialog (optional).\nEmpirica.about(About); // Set the Consent Component you want to present players (optional).\n\nEmpirica.consent(Consent); // Set the component for getting the player id (optional)\n\nEmpirica.newPlayer(NewPlayer); // Introduction pages to show before they play the game (optional).\n// At this point they have been assigned a treatment. You can return\n// different instruction steps depending on the assigned treatment.\n\nEmpirica.introSteps((game, treatment) => {\n  const steps = [InstructionStepOne];\n\n  if (treatment.playerCount > 1) {\n    steps.push(InstructionStepTwo);\n  }\n\n  steps.push(Quiz);\n  return steps;\n}); // The Round component containing the game UI logic.\n// This is where you will be doing the most development.\n// See client/game/Round.jsx to learn more.\n\nEmpirica.round(Round); // End of Game pages. These may vary depending on player or game information.\n// For example we can show the score of the user, or we can show them a\n// different message if they actually could not participate the game (timed\n// out), etc.\n// The last step will be the last page shown to user and will be shown to the\n// user if they come back to the website.\n// If you don't return anything, or do not define this function, a default\n// exit screen will be shown.\n\nEmpirica.exitSteps((game, player) => {\n  if (!game || player.exitStatus && player.exitStatus !== \"finished\" && player.exitReason !== \"playerQuit\") {\n    return [Sorry];\n  }\n\n  return [ExitSurvey, Thanks];\n}); // Start the app render tree.\n// NB: This must be called after any other Empirica calls (Empirica.round(),\n// Empirica.introSteps(), ...).\n// It is required and usually does not need changing.\n\nMeteor.startup(() => {\n  render(Empirica.routes(), document.getElementById(\"app\"));\n});\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".mjs\",\n    \".less\",\n    \".jsx\"\n  ]\n});\n\nvar exports = require(\"/client/main.js\");","hash":"71f440c37affa87a7deaa7333aee114100628fbd","servePath":"/app.js","sourceMap":{"version":3,"sources":["client/chat/ChatContainer.js","client/chat/ChatHeader.js","client/chat/ErrorBoundary.js","client/chat/Footer.js","client/chat/Message.js","client/chat/Messages.js","client/exit/ExitSurvey.jsx","client/exit/Sorry.jsx","client/exit/Thanks.jsx","client/game/About.jsx","client/game/MyNetwork.jsx","client/game/PlayerProfile.jsx","client/game/PlayerTab.jsx","client/game/Results.jsx","client/game/Round.jsx","client/game/SocialExposure.jsx","client/game/StageResult.jsx","client/game/SymbolButton.jsx","client/game/Task.jsx","client/game/TaskResponse.jsx","client/game/TaskStimulus.jsx","client/game/Timer.jsx","client/intro/Consent.jsx","client/intro/InstructionStepOne.jsx","client/intro/InstructionStepTwo.jsx","client/intro/NewPlayer.jsx","client/intro/Quiz.jsx","client/main.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","export","ChatContainer","PropTypes","React","Footer","Message","Messages","ChatHeader","ErrorBoundary","PureComponent","state","isActive","isOpen","onTitleClick","setState","onXClick","customKey","onCloseChat","props","onNewMessage","msg","scope","append","componentDidMount","dockStartOpen","docked","render","player","customClassName","onIncomingMessage","filter","timeStamp","otherPlayer","header","HeaderComp","message","MessageComp","footer","FooterComp","rest","common","defaultProps","hideAvatar","hideName","svgAvatar","hideNotificiationBadge","propTypes","object","isRequired","string","instanceOf","Date","bool","func","elementType","Component","constructor","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","console","children","_objectSpread","comment","rows","minRows","maxRows","buttonHeight","handleSubmit","e","preventDefault","text","trim","_id","avatar","get","name","handleChange","el","currentTarget","textareaLineHeight","previousRows","target","currentRows","scrollHeight","scrollTop","usedRows","value","document","getElementById","offsetHeight","key","isString","renderTime","hours","getHours","minutes","getMinutes","time","toString","padStart","renderName","isSelf","msgPlayer","avatarImg","useAvatar","warn","avatarSrc","svg","src","__html","alt","shape","self","filteredMessages","WrappedComponent","messages","messagesEl","createRef","messageLength","current","length","componentDidUpdate","prevProps","currentMessages","splice","messageComp","map","i","exportDefault","ExitSurvey","Centered","Radio","selected","label","onChange","age","gender","strength","fair","feedback","event","onSubmit","education","stepName","Sorry","Meteor","game","exitStatus","exitReason","isDevelopment","Thanks","About","MyNetwork","PlayerTab","stage","round","onOpenChat","network","otherNodeId","PlayerProfile","Timer","renderProfile","renderScore","toFixed","handleOpenChat","log","otherPlayerNodeId","openChat","otherPlayerId","players","find","p","parseInt","id","Round","result","SocialExposure","StageResult","Results","Task","pairOfPlayers","sort","p1","p2","activeChats","includes","push","newActiveChats","chat","Chat","TimeSync","moment","Slider","logIncomingMessage","msgs","mostRecentMsg","receiver","verb","subjectId","at","serverTime","renderSocialInteraction","chatKey","counter","timer","finishDisplay","set","showResults","x","setTimeout","SymbolButton","handleClick","handleButtonSelect","TaskResponse","TaskStimulus","handleReconsider","symbolName","selectedButton","renderSubmitted","renderSlider","renderButton","selectedSymbol","task","displayName","symbol","submitted","playersSubmitted","playersNotSubmitted","filledDots","unfilledDots","disabled","opacity","StageTimeWrapper","remainingSeconds","classes","join","Consent","ConsentButton","InstructionStepOne","hasPrev","hasNext","onNext","onPrev","InstructionStepTwo","NewPlayer","handleUpdate","handleNewPlayer","Quiz","sum","horse","toLowerCase","alert","Empirica","about","consent","newPlayer","introSteps","treatment","steps","playerCount","exitSteps","startup","routes"],"mappings":"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","file":"/app.js","sourcesContent":["import \"./style.less\";\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Footer from \"./Footer\";\nimport Message from \"./Message\";\nimport Messages from \"./Messages\";\nimport ChatHeader from \"./ChatHeader\";\nimport ErrorBoundary from \"./ErrorBoundary\";\n\nexport default class ChatContainer extends React.PureComponent {\n  state = { \n    isActive: true,\n    isOpen: true \n  };\n\n  onTitleClick = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onXClick = () => {\n    const {customKey, onCloseChat} = this.props;\n    onCloseChat(customKey);\n    // this.setState({ isActive: !this.state.isActive})\n  };\n\n  onNewMessage = (msg) => {\n    const { onNewMessage, scope, customKey } = this.props;\n\n    if (onNewMessage) {\n      msg = onNewMessage(msg);\n      if (!msg) {\n        return;\n      }\n    }\n\n    scope.append(customKey, msg);\n  };\n\n  componentDidMount = () => {\n    const { dockStartOpen, docked } = this.props;\n    if (docked && !dockStartOpen) {\n      this.setState({\n        isOpen: false,\n      });\n    }\n  };\n\n  render() {\n    const { isOpen } = this.state;\n    const {\n      player,\n      scope,\n      customKey,\n      customClassName,\n      docked,\n      onIncomingMessage,\n\n      filter,\n      timeStamp,\n      otherPlayer,\n      header: HeaderComp,\n      message: MessageComp,\n      footer: FooterComp,\n      isActive,\n      onCloseChat,\n      ...rest\n    } = this.props;\n\n    const common = { player, scope, customKey };\n    if (!isActive) {\n      return null;\n    }\n\n    return (\n      <ErrorBoundary>\n        <div\n          className={`${\n            customClassName ? customClassName : \"empirica-chat-container\"\n          } ${docked ? \"undocked\" : \"undocked\"}`}\n        >\n          <div className={`chat ${isOpen ? \"open\" : \"\"}`}>\n            {docked && (\n              <HeaderComp {...common} otherPlayer={otherPlayer} onTitleClick={this.onTitleClick} onXClick={this.onXClick} isOpen={isOpen} />\n            )}\n            {isOpen ? (\n              <>\n                <Messages\n                  {...common}\n                  messageComp={MessageComp}\n                  filter={filter}\n                  onIncomingMessage={onIncomingMessage}\n                  {...rest}\n                />\n                <FooterComp\n                  {...common}\n                  timeStamp={timeStamp}\n                  onNewMessage={this.onNewMessage}\n                />\n              </>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  // header: ({ onClick, isOpen }) => (\n  //   <div className=\"header\">\n  //     <span className=\"title\">CHAT </span>\n  //     <span className=\"close-button\" onClick={onClick}>\n  //       {isOpen ? \"-\" : \"+\"}\n  //     </span>\n  //   </div>\n  // ),\n  header: ChatHeader,\n  message: Message,\n  footer: Footer,\n};\n\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired,\n};\n","import \"./style.less\";\nimport React from \"react\";\n\nexport default class ChatHeader extends React.PureComponent {\n\n\n    render() {\n        const {otherPlayer, onTitleClick, onXClick, isOpen} = this.props;\n\n        return (\n            <div className=\"header\">\n                <span className=\"title\" onClick={onTitleClick}> {otherPlayer} </span>\n                <span className=\"close-button\" onClick={onXClick}> \n                    <img src={`images/icon-net-window-close.png`} width=\"17px\" height=\"17px\"/>\n                </span>\n            </div>\n        )\n    }\n}","import React from \"react\";\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(\"error on chat package \", error);\n    console.error(\"error on chat package:info \", errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n","import \"./style.less\";\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport default class Footer extends React.Component {\n  state = { comment: \"\", rows: 1, minRows: 1, maxRows: 5, buttonHeight: 30 };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const text = this.state.comment.trim();\n    if (text === \"\") {\n      return;\n    }\n\n    const { player, onNewMessage, timeStamp } = this.props;\n\n    let msg = {\n      text,\n      player: {\n        _id: player._id,\n        avatar: player.get(\"avatar\"),\n        name: player.get(\"name\") || player._id,\n      },\n    };\n\n    if (timeStamp) {\n      msg = { ...msg, timeStamp };\n    }\n\n    onNewMessage(msg);\n\n    this.setState({ comment: \"\" });\n  };\n\n  handleChange = (e) => {\n    const el = e.currentTarget;\n    const textareaLineHeight = 24;\n    const { minRows, maxRows } = this.state;\n\n    const previousRows = e.target.rows;\n    e.target.rows = minRows; // reset number of rows in textarea\n    const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n    if (currentRows === previousRows) {\n      e.target.rows = currentRows;\n    }\n\n    if (currentRows >= maxRows) {\n      e.target.rows = maxRows;\n      e.target.scrollTop = e.target.scrollHeight;\n    }\n\n    const usedRows = currentRows < maxRows ? currentRows : maxRows;\n\n    this.setState(\n      {\n        [el.name]: el.value,\n        rows: usedRows,\n      },\n      () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight,\n        });\n      }\n    );\n  };\n\n  render() {\n    const { comment, rows, buttonHeight } = this.state;\n\n    return (\n      <form className=\"chat-footer-form\" onSubmit={this.handleSubmit}>\n        <div className=\"chat-footer\">\n          <textarea\n            id=\"chat-input\"\n            name=\"comment\"\n            className=\"chat-input\"\n            placeholder=\"My message\"\n            value={comment}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                this.handleSubmit(e);\n              }\n            }}\n            rows={rows}\n            onChange={this.handleChange}\n            autoComplete=\"off\"\n          />\n        </div>\n        <button\n            type=\"submit\"\n            form=\"chat-input\"\n            className=\"chat-button-send\"\n            disabled={!comment}\n            onClick={this.handleSubmit}\n          >\n            <img src={`images/icon-enter.png`} width=\"15px\" height=\"17px\"/>\n          </button>\n      </form>\n    );\n  }\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date),\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { isString } from 'lodash';\n\n\nexport default class Message extends React.Component {\n  renderTime = (timeStamp) => {\n    const hours = new Date(timeStamp).getHours();\n    const minutes = new Date(timeStamp).getMinutes();\n\n    if (!hours || !minutes) {\n      return null;\n    }\n\n    const time = `${hours\n      .toString()\n      .padStart(2, 0)}:${minutes.toString().padStart(2, 0)}`;\n\n    return <div className=\"timeStamp\">{time}</div>;\n  };\n\n  renderName = (isSelf, name) => {\n    return <div className=\"name\">{isSelf ? \"You\" : name}</div>;\n  };\n\n  render() {\n    const { message, player, hideName, hideAvatar, svgAvatar, avatar } = this.props;\n    const { player: msgPlayer, text, timeStamp } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar)\n    if (useAvatar && avatar){\n      if (isString(avatar)){\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\")\n        avatarImg = <img className=\"avatar\" alt={''} src={avatar} />\n      }\n      else{\n        const avatarSrc = avatar.svg || avatar.src\n        if (avatar.svg) {\n          avatarImg = <div\n            dangerouslySetInnerHTML={{ __html: avatarSrc }}\n            className=\"avatar\"\n          />\n        } else{\n          avatarImg = <img className=\"avatar\" alt={avatar.alt} src={avatar.src} />\n        }\n      }\n    }\n\n\n    return (\n      <div>\n        {!isSelf ? \n          <div className=\"message\" >    \n            <div className=\"other-message-tick-container\">\n                  <img src={`images/net-bubble.png`} width=\"15px\" height=\"10px\"/>\n            </div> \n            <div className={\"text-container-other\"}>\n            {/* {!hideName && this.renderName(isSelf, msgPlayer.name)} */}\n              <div className=\"text\">{text}</div>\n            </div>\n          </div>\n          : \n          <div className=\"message\">    \n            <div className={\"text-container-self\"}>\n              {/* {!hideName && this.renderName(isSelf, msgPlayer.name)} */}\n              <div className=\"text\">{text}</div>\n              {/* {timeStamp &&\n              new Date(timeStamp).getTime() > 0 &&\n              this.renderTime(timeStamp)} */}\n            </div>\n            <div className=\"self-message-tick-container\">\n              <img src={`images/my-bubble.png`} width=\"15px\" height=\"10px\"/>\n            </div> \n          </div>\n        }\n      </div>\n    );\n  }\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string,\n    }),\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg:  PropTypes.string,\n    src:  PropTypes.string,\n    alt:  PropTypes.string,\n  }),\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nfunction filteredMessages(WrappedComponent) {\n  return class extends React.Component {\n    render() {\n      const { scope, customKey, filter } = this.props;\n      let messages = scope.get(customKey) || [];\n      if (filter) {\n        messages = filter(messages);\n      }\n\n      return <WrappedComponent messages={[...messages]} {...this.props} />;\n    }\n  };\n}\n\nclass Messages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.messagesEl = React.createRef();\n    this.state = {\n      messageLength: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n    this.setState({ messageLength: this.props.messages.length });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { messageLength } = this.state;\n    const {\n      messages: currentMessages,\n      onIncomingMessage,\n      customKey,\n    } = this.props;\n\n    if (\n      this.messagesEl.current !== null &&\n      currentMessages.length > messageLength\n    ) {\n      this.setState({ messageLength: currentMessages.length }, () => {\n        if (onIncomingMessage) {\n          onIncomingMessage(\n            currentMessages.splice(this.state.messageLength),\n            customKey\n          );\n        }\n\n        this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n      });\n    }\n  }\n\n  render() {\n    const { player, messages, messageComp: MessageComp, ...rest } = this.props;\n\n    return (\n      <div className=\"messages\" ref={this.messagesEl}>\n        {messages.length === 0 ? (\n          <div className=\"empty\">No messages yet...</div>\n        ) : null}\n        {messages.map((message, i) => {\n          return (\n            <MessageComp key={i} message={message} player={player} {...rest} />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nMessages.propTypes = {\n  player: PropTypes.object,\n  messageComp: PropTypes.elementType,\n  filter: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customKey: PropTypes.string,\n};\n\nexport default filteredMessages(Messages);\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nconst Radio = ({ selected, name, value, label, onChange }) => (\n  <label>\n    <input\n      type=\"radio\"\n      name={name}\n      value={value}\n      checked={selected === value}\n      onChange={onChange}\n    />\n    {label}\n  </label>\n);\n\nexport default class ExitSurvey extends React.Component {\n  static stepName = \"ExitSurvey\";\n  state = { age: \"\", gender: \"\", strength: \"\", fair: \"\", feedback: \"\" };\n\n  handleChange = event => {\n    const el = event.currentTarget;\n    this.setState({ [el.name]: el.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state);\n  };\n\n  render() {\n    const { player } = this.props;\n    const { age, gender, strength, fair, feedback, education } = this.state;\n\n    return (\n      <Centered>\n        <div className=\"exit-survey\">\n          <h1> Exit Survey </h1>\n          <p>\n            Please submit the following code to receive your bonus:{\" \"}\n            <strong>{player._id}</strong>.\n          </p>\n          <p>\n            You final <strong>bonus</strong> is in addition of the{\" \"}\n            <strong>1 base reward</strong> for completing the HIT.\n          </p>\n          <br />\n          <p>\n            Please answer the following short survey. You do not have to provide\n            any information you feel uncomfortable with.\n          </p>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"form-line\">\n              <div>\n                <label htmlFor=\"age\">Age</label>\n                <div>\n                  <input\n                    id=\"age\"\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"150\"\n                    step=\"1\"\n                    dir=\"auto\"\n                    name=\"age\"\n                    value={age}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"gender\">Gender</label>\n                <div>\n                  <input\n                    id=\"gender\"\n                    type=\"text\"\n                    dir=\"auto\"\n                    name=\"gender\"\n                    value={gender}\n                    onChange={this.handleChange}\n                    autoComplete=\"off\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label>Highest Education Qualification</label>\n              <div>\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"high-school\"\n                  label=\"High School\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"bachelor\"\n                  label=\"US Bachelor's Degree\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"master\"\n                  label=\"Master's or higher\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"other\"\n                  label=\"Other\"\n                  onChange={this.handleChange}\n                />\n              </div>\n            </div>\n\n            <div className=\"form-line thirds\">\n              <div>\n                <label htmlFor=\"strength\">\n                  How would you describe your strength in the game?\n                </label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"strength\"\n                    name=\"strength\"\n                    value={strength}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"fair\">Do you feel the pay was fair?</label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"fair\"\n                    name=\"fair\"\n                    value={fair}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"feedback\">\n                  Feedback, including problems you encountered.\n                </label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"feedback\"\n                    name=\"feedback\"\n                    value={feedback}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <button type=\"submit\">Submit</button>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Meteor } from \"meteor/meteor\";\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Sorry extends Component {\n    static stepName = \"Sorry\";\n\n    render() {\n        const { player, game } = this.props;\n        let msg;\n        switch (player.exitStatus) {\n            case \"gameFull\":\n                msg = \"All games you are eligible for have filled up too fast...\";\n                break;\n            case \"gameLobbyTimedOut\":\n                msg = \"There were NOT enough players for the game to start...\";\n                break;\n            case \"playerEndedLobbyWait\":\n                msg =\n                    \"You decided to stop waiting, we are sorry it was too long a wait.\";\n                break;\n            default:\n                msg = \"Unfortunately the Game was cancelled...\";\n                break;\n        }\n        if (player.exitReason === \"failedQuestion\") {\n            msg =\n                \"Unfortunately you did not meet the conditions required to play the game.\";\n        }\n        // Only for dev\n        if (!game && Meteor.isDevelopment) {\n            msg =\n                \"Unfortunately the Game was cancelled because of failed to init Game (only visible in development, check the logs).\";\n        }\n        return (\n            <Centered>\n                <div>\n                    <h4>Sorry!</h4>\n                    <p>Sorry, you were not able to play today! {msg}</p>\n                    <p>\n                        <strong>Please contact the researcher to see if there are more games available.</strong>\n                    </p>\n                </div>\n            </Centered>\n        );\n    }\n}","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Thanks extends React.Component {\n  static stepName = \"Thanks\";\n  render() {\n    return (\n      <div className=\"finished\">\n        <div>\n          <h4>Finished!</h4>\n          <p>Thank you for participating!</p>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class About extends React.Component {\n  render() {\n    return <div>Here be the presentation of the experiement(ers).</div>;\n  }\n}\n","import React from 'react';\nimport PlayerTab from './PlayerTab';\n\nexport default class MyNetwork extends React.Component {\n\n    render() {\n        const {game, stage, round, player, onOpenChat} = this.props;\n        const network = player.get(\"neighbors\");\n        return (\n            <div className=\"network-container\">\n                <p className=\"network-header\"> MY NETWORK</p>\n                <div className=\"network-all-players-container\">\n                {network.map((otherNodeId) => {\n                    // const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id;\n                    return (\n                        <PlayerTab game={game} otherPlayerNodeId={otherNodeId} openChat={onOpenChat} />\n                    )\n                })\n                }\n                </div>\n            </div>\n        )\n    }\n}","import React from \"react\";\n\nimport Timer from \"./Timer.jsx\";\n\nexport default class PlayerProfile extends React.Component {\n  renderProfile() {\n    const { player } = this.props;\n    return (\n      <div className=\"profile-score\">\n        <h3>Your Profile</h3>\n        <img src={player.get(\"avatar\")} className=\"profile-avatar\" />\n      </div>\n    );\n  }\n\n  renderScore() {\n    const { player } = this.props;\n    return (\n      <div className=\"profile-score\">\n        <h4>Total score</h4>\n        <span>{(player.get(\"score\") || 0).toFixed(2)}</span>\n      </div>\n    );\n  }\n\n  render() {\n    const { stage } = this.props;\n\n    return (\n      <aside className=\"player-profile\">\n        {this.renderProfile()}\n        {this.renderScore()}\n        <Timer stage={stage} />\n      </aside>\n    );\n  }\n}\n","import React from 'react';\n\nexport default class PlayerTab extends React.Component {\n\n    handleOpenChat = () => {\n        console.log(this.props);\n        const {otherPlayerNodeId, openChat} = this.props;\n        openChat(otherPlayerNodeId);\n    }\n\n    render() {\n        const {game, otherPlayerNodeId, openChat} = this.props;\n        const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherPlayerNodeId)).id;\n\n\n        return (\n            <div className=\"network-player-container\">\n                <div className=\"network-name-container\" onClick={this.handleOpenChat}>\n                    {otherPlayerId}\n                </div>\n                <div className=\"network-avatar-container\">\n                    <img src={`images/icon-profile-white.png`} width=\"25px\" height=\"25px\" />\n                </div>\n            </div>\n        )\n    }\n}","import React from \"react\";\n\nexport default class Round extends React.Component {\n\n  render() {\n    const { stage, round, game } = this.props;\n    const result = round.get(\"result\");\n      \n    return (\n        <div>\n            <h1> Your team was {result ? \"CORRECT\" : \"INCORRECT\"} !</h1>\n        </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport PlayerProfile from \"./PlayerProfile.jsx\";\nimport SocialExposure from \"./SocialExposure.jsx\";\nimport MyNetwork from \"./MyNetwork.jsx\";\nimport StageResult from \"./StageResult.jsx\";\nimport Results from \"./Results.jsx\";\nimport Task from \"./Task.jsx\";\nimport Timer from \"./Timer.jsx\";\n\nexport default class Round extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      activeChats : [],\n    }\n}\n\n  onOpenChat = (otherPlayerNodeId) => {\n    const {player} = this.props;\n    var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherPlayerNodeId)];\n    pairOfPlayers.sort((p1,p2) => p1 - p2);\n    var customKey = `${pairOfPlayers[0]}-${pairOfPlayers[1]}`;\n    console.log(this.state);\n    console.log(this.state.activeChats);\n    if (!this.state.activeChats.includes(customKey)) {\n      this.state.activeChats.push(customKey);\n    }\n\n    console.log(this.state);\n  }\n\n  onCloseChat = (customKey) => {\n    const newActiveChats = this.state.activeChats.filter((chat) => chat !== customKey);\n    this.setState({activeChats : newActiveChats});\n    console.log(this.state);\n  }\n\n  render() {\n    const { stage, round, player, game } = this.props;\n    // const showResults = stage.get(\"showResults\");\n\n    // if (showResults) {\n    //   const result = stage.get(\"result\")\n    //   return (\n    //   <div>\n    //     <StageResult stage={stage} showResults={showResults} result={result} timer={10}/>\n    //   </div>\n    //   )\n    // }\n\n    if (stage.name === \"Result\") {\n      return (\n        <div>\n          <Results game={game} round={round} stage={stage}/> \n          <Timer stage={stage}/>\n        </div>\n      )\n    } else {\n      \n      return (\n        <div className=\"round\">\n          <div className=\"content\">\n            {/* <PlayerProfile player={player} stage={stage} game={game} /> */}\n            <div className=\"task-network-container\">\n              <Task game={game} round={round} stage={stage} player={player} />\n              <MyNetwork game={game} round={round} stage={stage} player={player} onOpenChat={(otherPlayerNodeId) => this.onOpenChat(otherPlayerNodeId)}/>\n            </div>\n            <SocialExposure game={game} round={round} stage={stage} player={player} onCloseChat={(customKey) => this.onCloseChat(customKey)} activeChats={this.state.activeChats} />\n            {/* <Timer stage={stage} /> */}\n          </div>\n        </div>\n      );\n    }\n  } \n}\n","import \"../chat/style.less\";\n\nimport React from \"react\";\nimport { Chat } from \"@empirica/chat\";\nimport ChatContainer from \"../chat/ChatContainer.js\";\nimport  Message  from \"../chat/Message.js\";\nimport Footer from \"../chat/Footer.js\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport moment from \"moment\";\nimport Slider from \"meteor/empirica:slider\";\n\n\nexport default class SocialExposure extends React.Component {\n  renderSocialInteraction(otherPlayer) {\n    const value = otherPlayer.round.get(\"value\");\n    return (\n      <div className=\"alter\" key={otherPlayer._id}>\n        <img src={otherPlayer.get(\"avatar\")} className=\"profile-avatar\" />\n        <div className=\"range\">\n          <Slider\n            min={0}\n            max={1}\n            stepSize={0.01}\n            value={value}\n            disabled\n            hideHandleOnEmpty\n          />\n        </div>\n      </div>\n    );\n  }\n\n  logIncomingMessage = (msgs, customKey) => {\n    const {game, round, stage, player} = this.props;\n\n    const messages = round.get(`${customKey}`)\n    const mostRecentMsg = messages[messages.length -1];\n    const receiver = mostRecentMsg.player._id;\n\n    // onIncomingMessage logs the message for both sender and receiver\n    // Only log one copy of the message\n    if (player._id === receiver) {\n      stage.append(\"log\", {\n        verb: \"messageLog\",\n        subjectId: player.id,\n        object: mostRecentMsg,\n        at: moment(TimeSync.serverTime(null, 1000)),\n      })\n    }\n  }\n\n  render() {\n    const { game, round, player, onCloseChat, activeChats } = this.props;\n\n    const network = player.get(\"neighbors\");\n    // reactive time value only updates at 1000 ms\n    const timeStamp = new Date(TimeSync.serverTime(null, 1000));\n\n    if (network.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"all-chats-container\">\n        {/* <p>\n          <strong>There are {network.length} other players:</strong>\n        </p> */}\n        {/* {otherPlayers.map(p => this.renderSocialInteraction(p))} */}\n        {/* <Chat player={player} scope={round} /> */}\n\n        {network.map(otherNodeId => {\n          var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherNodeId)];\n          pairOfPlayers.sort((p1,p2) => p1 - p2);\n          const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id\n          const chatKey = `${pairOfPlayers[0]}-${pairOfPlayers[1]}`;\n          return (\n            <div>\n              {/* <h2>{otherPlayerId}</h2> */}\n              <ChatContainer\n                docked={true}\n                key={otherNodeId}\n                player={player}\n                otherPlayer={otherPlayerId}\n                scope={round}  \n                timeStamp={timeStamp}\n                customClassName={\"ray-chat-container\"}\n                message={Message}\n                footer={Footer}\n                onIncomingMessage={this.logIncomingMessage}           \n                customKey={chatKey}\n                isActive={activeChats.includes(chatKey)}\n                onCloseChat={onCloseChat}\n              />\n           {/* <ChatContainer\n            //     key={otherNodeId}\n            //     player={player}\n            //     scope={round}  \n            //     timeStamp={timeStamp}\n            //     onIncomingMessage={this.logIncomingMessage}           \n            //     customKey={`${pairOfPlayers[0]}-${pairOfPlayers[1]}`}\n            //   /> */}\n             </div>\n            )\n          }\n        )}\n\n\n\n\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class StageResult extends React.Component {\n\n  constructor(props) {\n      super(props);\n      this.state = {\n          counter: props.timer\n      }\n  }\n\n  finishDisplay() {\n    const { stage } = this.props;\n    stage.set(\"resultsShown\", true);\n  }\n\n  render() {\n\n    if (this.props.showResults) {\n        let x = this;\n        let { counter } = this.state;\n\n        let timer = setTimeout(function () {\n            if (counter > 0) {\n                x.setState({counter: counter - 1});\n            } else {\n                x.finishDisplay();\n                // x.props.finishDisplay();\n            }\n        }, 1000);\n\n        return (\n            <div>\n                <h1> Your team was {this.props.result ? \"CORRECT\" : \"INCORRECT\"} !</h1>\n                <h3> SECONDS LEFT: {this.state.counter} </h3>\n            </div>\n            )\n    } else {\n        return <h1> TIME UP </h1>\n    }\n  }\n}\n","import React from 'react';\nexport default class SymbolButton extends React.Component {\n/* \n  @prop id - id of the symbol\n  @prop name - name of the symbol (TESTING PURPOSES)\n*/\n  constructor(props) {\n      super(props);\n  }\n\n  // When button is selected, player sets the id of the button he selected\n  handleClick = () => {\n      const { game, player, stage, name, handleButtonSelect } = this.props;\n      player.set(\"symbolSelected\", name);\n      handleButtonSelect(name);\n      console.log(`${player.get(\"nodeId\")} selected ${name}`);\n  }\n\n  render() {\n    const { game, stage, player, name, selected} = this.props;\n\n\n    return (\n      <div className=\"symbol-container\">\n        <button className={selected ? \"symbolButtonSelected\" : \"symbolButtonUnselected\"} onClick={this.handleClick}>\n            <img src={`images/symbols/tangrams/${name}.png`} height=\"80px\" width=\"80px\"/>\n        </button>\n     </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport TaskResponse from \"./TaskResponse\";\nimport TaskStimulus from \"./TaskStimulus\";\n\nexport default class Task extends React.Component {\n  render() {\n    const { stage, player, game } = this.props;\n\n    return (\n      <div className=\"task-container\">\n        {/* <TaskStimulus {...this.props} /> */}\n        <TaskResponse {...this.props} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Slider from \"meteor/empirica:slider\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport moment from \"moment\";\n\nimport SymbolButton from \"./SymbolButton.jsx\";\n\nexport default class TaskResponse extends React.Component {\n  constructor(props) {\n    super(props);  \n    this.state = {\n      selectedButton: props.player.get(\"symbolSelected\") | \"\",\n    }\n  }\n\n  handleSubmit = event => {\n    const { stage, player, game } = this.props;\n\n    event.preventDefault();\n\n    stage.append(\"log\", {\n      verb: \"playerSubmitted\",\n      subjectId: player.id,\n      object: true,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    })\n    player.set(\"submitted\", true);\n  };\n\n  handleReconsider = event => {\n    const { stage, player, game } = this.props;\n\n    event.preventDefault();\n    console.log(\"Reconsidering...\");\n    player.set(\"submitted\", false);\n\n    stage.append(\"log\", {\n      verb: \"playerReconsidered\",\n      subjectId: player.id,\n      object: true,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    })\n\n    // this.setState({selectedButton: \"\"});\n\n  }\n\n  handleButtonSelect= (symbolName) => {\n    const { stage, player, game } = this.props;\n    // stage.set(\"selectedButton\", symbolName);\n    this.setState({selectedButton: symbolName});\n\n    stage.append(\"log\", {\n      verb: \"selectingSymbol\",\n      subjectId: player.id,\n      object: symbolName,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    });\n\n  }\n\n  renderSubmitted() {\n    return (\n      <div>\n        <h5>Waiting on other players...</h5>\n        Please wait until all players are ready. If you would like to reconsider your answer, click on the reconsider button.\n      </div>\n    );\n  }\n\n  renderSlider() {\n    const { player } = this.props;\n    const value = player.round.get(\"value\");\n    return (\n      <Slider\n        min={0}\n        max={1}\n        stepSize={0.01}\n        labelStepSize={0.25}\n        onChange={this.handleChange}\n        value={value}\n        hideHandleOnEmpty\n      />\n    );\n  }\n\n  renderButton() {\n    const { stage, player, game } = this.props;\n    // const task = stage.get(\"task\");\n    const selectedSymbol = player.get(\"symbolSelected\")\n    const task = player.get(`${stage.displayName}`)\n    return (\n      task.map((symbol) => \n      <SymbolButton \n        key={symbol}\n        name={symbol}\n        handleButtonSelect={(symbolName) => this.handleButtonSelect(symbolName)}\n        selected={selectedSymbol === symbol}\n        stage={stage}\n        game={game}\n        player={player}\n      />\n      )\n    );\n  }\n\n  render() {\n    const { stage, round, player, game } = this.props;\n\n\n    const selected = player.get(\"symbolSelected\")\n    const submitted = player.get(\"submitted\");\n\n    // Create a list of dots to show how many players submitted\n    const playersSubmitted = round.get(\"numPlayersSubmitted\");\n    const playersNotSubmitted = game.players.length - playersSubmitted;\n    let filledDots = [];\n    let unfilledDots = [];\n    for (let i = 0; i < playersSubmitted; i++) {\n      filledDots.push(<span className=\"filled-dot\"></span>)\n    }\n    for (let i = 0; i < playersNotSubmitted; i++) {\n      unfilledDots.push(<span className=\"empty-dot\"></span>)\n    }\n\n    // If the player already submitted, don't show the slider or submit button\n    \n    const disabled = player.get(\"submitted\");\n    return (\n      <div className=\"task-response-container\">\n        <div className=\"task-response-header\">\n          <p className=\"header\"> MY CARD</p>\n          <div className=\"submission-dots-container\">\n            <p className=\"header\"> SUBMITTED ANSWERS </p>\n            {filledDots}\n            {unfilledDots}\n          </div>\n        </div>\n        <div className=\"task-response-body\">\n          <div className=\"submission-message-container\">\n            {submitted ? this.renderSubmitted() : \"\"}\n          </div>\n          <div className=\"task-response\">\n              {this.renderButton()}\n          </div>\n        </div>\n        {/* {!submitted ? \n            <form onSubmit={this.handleSubmit}>\n              <button className=\"button button-submit\" disabled={submitted ? true : false} type=\"submit\"> Submit </button> \n            </form>\n          :\n            <button className=\"button button-b button-reconsider\" disabled={!submitted ? true : false} onClick={this.handleReconsider}> Reconsider </button> \n        } */}\n          <div className=\"button-container\">\n              <form onSubmit={this.handleSubmit} style={{opacity: submitted ? 0 : 1}}>\n                <button \n                  className={!selected || submitted ? \"arrow-button button-submit-disabled\" : \"arrow-button button-submit\"} \n                  disabled= {!selected || submitted ? true : false} type=\"submit\"> Submit </button> \n              </form>\n              <form onSubmit={this.handleReconsider} style={{opacity: !submitted ? 0 : 1}}>\n                <button className=\"arrow-button button-reconsider\" disabled={!submitted ? true : false}> Reconsider </button> \n              </form>\n          </div>\n\n        </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class TaskStimulus extends React.Component {\n  render() {\n    const { stage, player } = this.props;\n\n    return (\n      <div className=\"task-stimulus\">\n        Work with your teammates to find the common symbol.\n      </div>\n    );\n  }\n}\n","import { StageTimeWrapper } from \"meteor/empirica:core\";\nimport React from \"react\";\n\nclass timer extends React.Component {\n  render() {\n    const { remainingSeconds } = this.props;\n    const classes = [\"timer\"];\n    if (remainingSeconds <= 5) {\n      classes.push(\"lessThan5\");\n    } else if (remainingSeconds <= 10) {\n      classes.push(\"lessThan10\");\n    }\n\n    return (\n      <div className={classes.join(\" \")}>\n        <h4>Timer</h4>\n        <span className=\"seconds\">{remainingSeconds}</span>\n      </div>\n    );\n  }\n}\n\nexport default (Timer = StageTimeWrapper(timer));\n","import React from \"react\";\n\nimport { Centered, ConsentButton } from \"meteor/empirica:core\";\n\nexport default class Consent extends React.Component {\n  render() {\n    return (\n      <Centered>\n        <div className=\"consent\">\n          <h1> Consent Form </h1>\n          <p>\n            This experiment is part of a MIT scientific project. Your decision\n            to participate in this experiment is entirely voluntary. There are\n            no known or anticipated risks to participating in this experiment.\n            There is no way for us to identify you. The only information we will\n            have, in addition to your responses, is the timestamps of your\n            interactions with our site. The results of our research may be\n            presented at scientific meetings or published in scientific\n            journals. Clicking on the \"AGREE\" button indicates that you are at\n            least 18 years of age, and agree to participate voluntary.\n          </p>\n          <br />\n          <ConsentButton text=\"I AGREE\" />\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class InstructionStepOne extends React.Component {\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev, game } = this.props;\n\n    return (\n      <Centered>\n        <div className=\"instructions\">\n          <h1> Instructions 1 </h1>\n          <p>\n            Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio,\n            animi? Quae autem asperiores officiis voluptatum fuga recusandae\n            minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab,\n            veritatis et labore.\n          </p>\n\n          <p>\n            <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n              Previous\n            </button>\n            <button type=\"button\" onClick={onNext} disabled={!hasNext}>\n              Next\n            </button>\n          </p>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class InstructionStepTwo extends React.Component {\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev } = this.props;\n    return (\n      <Centered>\n        <div className=\"instructions\">\n          <h1> Instructions 2 </h1>\n          <p>\n            Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio,\n            animi? Quae autem asperiores officiis voluptatum fuga recusandae\n            minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab,\n            veritatis et labore.\n          </p>\n\n          <p>\n            <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n              Previous\n            </button>\n            <button type=\"button\" onClick={onNext} disabled={!hasNext}>\n              Next\n            </button>\n          </p>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class NewPlayer extends Component {\n  state = { id: \"\" };\n\n  handleUpdate = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { handleNewPlayer } = this.props;\n    const { id } = this.state;\n    handleNewPlayer(id);\n  };\n\n  render() {\n    const { id } = this.state;\n\n    return (\n      <Centered>\n        <div >\n          <form onSubmit={this.handleSubmit}>\n            <h1>Identification</h1>\n\n            <p>\n              Please enter your id:\n                        </p>\n\n            <input\n              dir=\"auto\"\n              type=\"text\"\n              name=\"id\"\n              id=\"id\"\n              value={id}\n              onChange={this.handleUpdate}\n              required\n              autoComplete=\"off\"\n            />\n\n            <br />\n\n            <p>\n              <button type=\"submit\">Submit</button>\n            </p>\n\n          </form>\n        </div>\n      </Centered>\n    )\n  }\n}","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Quiz extends React.Component {\n  state = { sum: \"\", horse: \"\" };\n\n  handleChange = event => {\n    const el = event.currentTarget;\n    this.setState({ [el.name]: el.value.trim().toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.sum !== \"4\" || this.state.horse !== \"white\") {\n      alert(\"Incorrect! Read the instructions, and please try again.\");\n    } else {\n      this.props.onNext();\n    }\n  };\n\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev } = this.props;\n    const { sum, horse } = this.state;\n    return (\n      <Centered>\n        <div className=\"quiz\">\n          <h1> Quiz </h1>\n          <form onSubmit={this.handleSubmit}>\n            <p>\n              <label htmlFor=\"sum\">What is 2+2?</label>\n              <input\n                type=\"text\"\n                dir=\"auto\"\n                id=\"sum\"\n                name=\"sum\"\n                placeholder=\"e.g. 3\"\n                value={sum}\n                onChange={this.handleChange}\n                autoComplete=\"off\"\n                required\n              />\n            </p>\n            <p>\n              <label htmlFor=\"horse\">\n                What color was Napoleon's white horse?\n              </label>\n              <input\n                type=\"text\"\n                dir=\"auto\"\n                id=\"horse\"\n                name=\"horse\"\n                placeholder=\"e.g. brown\"\n                value={horse}\n                onChange={this.handleChange}\n                autoComplete=\"off\"\n                required\n              />\n            </p>\n\n            <p>\n              <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n                Back to instructions\n              </button>\n              <button type=\"submit\">Submit</button>\n            </p>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import Empirica from \"meteor/empirica:core\";\nimport { render } from \"react-dom\";\nimport ExitSurvey from \"./exit/ExitSurvey\";\nimport Thanks from \"./exit/Thanks\";\nimport Sorry from \"./exit/Sorry\";\nimport About from \"./game/About\";\nimport Round from \"./game/Round\";\nimport Consent from \"./intro/Consent\";\nimport InstructionStepOne from \"./intro/InstructionStepOne\";\nimport InstructionStepTwo from \"./intro/InstructionStepTwo\";\nimport Quiz from \"./intro/Quiz\";\nimport NewPlayer from \"./intro/NewPlayer\";\n\n\n// Set the About Component you want to use for the About dialog (optional).\nEmpirica.about(About);\n\n// Set the Consent Component you want to present players (optional).\nEmpirica.consent(Consent);\n\n// Set the component for getting the player id (optional)\nEmpirica.newPlayer(NewPlayer);\n\n// Introduction pages to show before they play the game (optional).\n// At this point they have been assigned a treatment. You can return\n// different instruction steps depending on the assigned treatment.\nEmpirica.introSteps((game, treatment) => {\n  const steps = [InstructionStepOne];\n  if (treatment.playerCount > 1) {\n    steps.push(InstructionStepTwo);\n  }\n  steps.push(Quiz);\n  return steps;\n});\n\n// The Round component containing the game UI logic.\n// This is where you will be doing the most development.\n// See client/game/Round.jsx to learn more.\nEmpirica.round(Round);\n\n// End of Game pages. These may vary depending on player or game information.\n// For example we can show the score of the user, or we can show them a\n// different message if they actually could not participate the game (timed\n// out), etc.\n// The last step will be the last page shown to user and will be shown to the\n// user if they come back to the website.\n// If you don't return anything, or do not define this function, a default\n// exit screen will be shown.\nEmpirica.exitSteps((game, player) => {\n  if (\n    !game ||\n    (player.exitStatus &&\n      player.exitStatus !== \"finished\" &&\n      player.exitReason !== \"playerQuit\")\n  ) {\n    return [Sorry];\n  }\n  return [ExitSurvey, Thanks];\n});\n\n// Start the app render tree.\n// NB: This must be called after any other Empirica calls (Empirica.round(),\n// Empirica.introSteps(), ...).\n// It is required and usually does not need changing.\nMeteor.startup(() => {\n  render(Empirica.routes(), document.getElementById(\"app\"));\n});\n"]}}]