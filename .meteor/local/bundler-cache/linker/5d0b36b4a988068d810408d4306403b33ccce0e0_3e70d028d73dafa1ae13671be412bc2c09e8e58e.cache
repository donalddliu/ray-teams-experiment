[{"type":"js","data":"/* Imports for global scope */\n\nMongo = Package.mongo.Mongo;\nReactiveVar = Package['reactive-var'].ReactiveVar;\nTracker = Package.tracker.Tracker;\nDeps = Package.tracker.Deps;\nMeteor = Package.meteor.Meteor;\nglobal = Package.meteor.global;\nmeteorEnv = Package.meteor.meteorEnv;\nWebApp = Package.webapp.WebApp;\nDDP = Package['ddp-client'].DDP;\nLaunchScreen = Package['launch-screen'].LaunchScreen;\nmeteorInstall = Package.modules.meteorInstall;\nPromise = Package.promise.Promise;\n_ = Package.underscore._;\nAutoupdate = Package.autoupdate.Autoupdate;\nReload = Package.reload.Reload;\n\n","servePath":"/global-imports.js"},{"type":"js","data":"var require = meteorInstall({\"client\":{\"chat\":{\"ChatContainer.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/ChatContainer.js                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 0);\n\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 1);\nmodule.export({\n  default: () => ChatContainer\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet Footer;\nmodule.link(\"./Footer\", {\n  default(v) {\n    Footer = v;\n  }\n\n}, 2);\nlet Message;\nmodule.link(\"./Message\", {\n  default(v) {\n    Message = v;\n  }\n\n}, 3);\nlet Messages;\nmodule.link(\"./Messages\", {\n  default(v) {\n    Messages = v;\n  }\n\n}, 4);\nlet ErrorBoundary;\nmodule.link(\"./ErrorBoundary\", {\n  default(v) {\n    ErrorBoundary = v;\n  }\n\n}, 5);\n\nclass ChatContainer extends React.PureComponent {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isOpen: true\n    };\n\n    this.onClick = () => {\n      this.setState({\n        isOpen: !this.state.isOpen\n      });\n    };\n\n    this.onNewMessage = msg => {\n      const {\n        onNewMessage,\n        scope,\n        customKey\n      } = this.props;\n\n      if (onNewMessage) {\n        msg = onNewMessage(msg);\n\n        if (!msg) {\n          return;\n        }\n      }\n\n      scope.append(customKey, msg);\n    };\n\n    this.componentDidMount = () => {\n      const {\n        dockStartOpen,\n        docked\n      } = this.props;\n\n      if (docked && !dockStartOpen) {\n        this.setState({\n          isOpen: false\n        });\n      }\n    };\n  }\n\n  render() {\n    const {\n      isOpen\n    } = this.state;\n\n    const _this$props = this.props,\n          {\n      player,\n      scope,\n      customKey,\n      customClassName,\n      docked,\n      onIncomingMessage,\n      filter,\n      timeStamp,\n      header: HeaderComp,\n      message: MessageComp,\n      footer: FooterComp\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"player\", \"scope\", \"customKey\", \"customClassName\", \"docked\", \"onIncomingMessage\", \"filter\", \"timeStamp\", \"header\", \"message\", \"footer\"]);\n\n    const common = {\n      player,\n      scope,\n      customKey\n    };\n    return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"\".concat(customClassName ? customClassName : \"empirica-chat-container\", \" \").concat(docked ? \"docked\" : \"undocked\")\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat \".concat(isOpen ? \"open\" : \"\")\n    }, docked && /*#__PURE__*/React.createElement(HeaderComp, _extends({}, common, {\n      onClick: this.onClick,\n      isOpen: isOpen\n    })), isOpen ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Messages, _extends({}, common, {\n      messageComp: MessageComp,\n      filter: filter,\n      onIncomingMessage: onIncomingMessage\n    }, rest)), /*#__PURE__*/React.createElement(FooterComp, _extends({}, common, {\n      timeStamp: timeStamp,\n      onNewMessage: this.onNewMessage\n    }))) : \"\")));\n  }\n\n}\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  header: (_ref) => {\n    let {\n      onClick,\n      isOpen\n    } = _ref;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\"\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title\"\n    }, \"CHAT \"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"close-button\",\n      onClick: onClick\n    }, isOpen ? \"-\" : \"+\"));\n  },\n  message: Message,\n  footer: Footer\n};\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"ErrorBoundary.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/ErrorBoundary.js                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => ErrorBoundary\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      hasError: false\n    };\n  }\n\n  static getDerivedStateFromError(error) {\n    return {\n      hasError: true\n    };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(\"error on chat package \", error);\n    console.error(\"error on chat package:info \", errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return /*#__PURE__*/React.createElement(\"h1\", null, \"Something went wrong.\");\n    }\n\n    return this.props.children;\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Footer.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Footer.js                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  default: () => Footer\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nclass Footer extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comment: \"\",\n      rows: 1,\n      minRows: 1,\n      maxRows: 5,\n      buttonHeight: 30\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const text = this.state.comment.trim();\n\n      if (text === \"\") {\n        return;\n      }\n\n      const {\n        player,\n        onNewMessage,\n        timeStamp\n      } = this.props;\n      let msg = {\n        text,\n        player: {\n          _id: player._id,\n          avatar: player.get(\"avatar\"),\n          name: player.get(\"name\") || player._id\n        }\n      };\n\n      if (timeStamp) {\n        msg = _objectSpread({}, msg, {\n          timeStamp\n        });\n      }\n\n      onNewMessage(msg);\n      this.setState({\n        comment: \"\"\n      });\n    };\n\n    this.handleChange = e => {\n      const el = e.currentTarget;\n      const textareaLineHeight = 24;\n      const {\n        minRows,\n        maxRows\n      } = this.state;\n      const previousRows = e.target.rows;\n      e.target.rows = minRows; // reset number of rows in textarea\n\n      const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n      if (currentRows === previousRows) {\n        e.target.rows = currentRows;\n      }\n\n      if (currentRows >= maxRows) {\n        e.target.rows = maxRows;\n        e.target.scrollTop = e.target.scrollHeight;\n      }\n\n      const usedRows = currentRows < maxRows ? currentRows : maxRows;\n      this.setState({\n        [el.name]: el.value,\n        rows: usedRows\n      }, () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      comment,\n      rows,\n      buttonHeight\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-footer\"\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"chat-input\",\n      name: \"comment\",\n      className: \"chat-input\",\n      placeholder: \"Enter chat message\",\n      value: comment,\n      onKeyPress: e => {\n        if (e.key === \"Enter\") {\n          this.handleSubmit(e);\n        }\n      },\n      rows: rows,\n      onChange: this.handleChange,\n      autoComplete: \"off\"\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      style: {\n        height: buttonHeight\n      },\n      className: \"chat-button-send\",\n      disabled: !comment\n    }, \"Send\")));\n  }\n\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date)\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Message.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Message.js                                                                                           //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Message\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet isString;\nmodule.link(\"lodash\", {\n  isString(v) {\n    isString = v;\n  }\n\n}, 2);\n\nclass Message extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.renderTime = timeStamp => {\n      const hours = new Date(timeStamp).getHours();\n      const minutes = new Date(timeStamp).getMinutes();\n\n      if (!hours || !minutes) {\n        return null;\n      }\n\n      const time = \"\".concat(hours.toString().padStart(2, 0), \":\").concat(minutes.toString().padStart(2, 0));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"timeStamp\"\n      }, time);\n    };\n\n    this.renderName = (isSelf, name) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"name\"\n      }, isSelf ? \"You\" : name);\n    };\n  }\n\n  render() {\n    const {\n      message,\n      player,\n      hideName,\n      hideAvatar,\n      svgAvatar,\n      avatar\n    } = this.props;\n    const {\n      player: msgPlayer,\n      text,\n      timeStamp\n    } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar);\n    console.log(isSelf);\n\n    if (useAvatar && avatar) {\n      if (isString(avatar)) {\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\");\n        avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n          className: \"avatar\",\n          alt: '',\n          src: avatar\n        });\n      } else {\n        const avatarSrc = avatar.svg || avatar.src;\n\n        if (avatar.svg) {\n          avatarImg = /*#__PURE__*/React.createElement(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: avatarSrc\n            },\n            className: \"avatar\"\n          });\n        } else {\n          avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n            className: \"avatar\",\n            alt: avatar.alt,\n            src: avatar.src\n          });\n        }\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\"\n    }, useAvatar ? avatarImg : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text-container-self\"\n    }, !hideName && this.renderName(isSelf, msgPlayer.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text\"\n    }, text), timeStamp && new Date(timeStamp).getTime() > 0 && this.renderTime(timeStamp)));\n  }\n\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string\n    })\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg: PropTypes.string,\n    src: PropTypes.string,\n    alt: PropTypes.string\n  })\n};\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Messages.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/chat/Messages.js                                                                                          //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default(v) {\n    _objectWithoutProperties = v;\n  }\n\n}, 0);\n\nlet _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default(v) {\n    _extends = v;\n  }\n\n}, 1);\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nfunction filteredMessages(WrappedComponent) {\n  return class extends React.Component {\n    render() {\n      const {\n        scope,\n        customKey,\n        filter\n      } = this.props;\n      let messages = scope.get(customKey) || [];\n\n      if (filter) {\n        messages = filter(messages);\n      }\n\n      return /*#__PURE__*/React.createElement(WrappedComponent, _extends({\n        messages: [...messages]\n      }, this.props));\n    }\n\n  };\n}\n\nclass Messages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.messagesEl = React.createRef();\n    this.state = {\n      messageLength: 0\n    };\n  }\n\n  componentDidMount() {\n    this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n    this.setState({\n      messageLength: this.props.messages.length\n    });\n  }\n\n  componentDidUpdate(prevProps) {\n    const {\n      messageLength\n    } = this.state;\n    const {\n      messages: currentMessages,\n      onIncomingMessage,\n      customKey\n    } = this.props;\n\n    if (this.messagesEl.current !== null && currentMessages.length > messageLength) {\n      this.setState({\n        messageLength: currentMessages.length\n      }, () => {\n        if (onIncomingMessage) {\n          onIncomingMessage(currentMessages.splice(this.state.messageLength), customKey);\n        }\n\n        this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n      });\n    }\n  }\n\n  render() {\n    const _this$props = this.props,\n          {\n      player,\n      messages,\n      messageComp: MessageComp\n    } = _this$props,\n          rest = _objectWithoutProperties(_this$props, [\"player\", \"messages\", \"messageComp\"]);\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"messages\",\n      ref: this.messagesEl\n    }, messages.length === 0 ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"empty\"\n    }, \"No messages yet...\") : null, messages.map((message, i) => {\n      return /*#__PURE__*/React.createElement(MessageComp, _extends({\n        key: i,\n        message: message,\n        player: player\n      }, rest));\n    }));\n  }\n\n}\n\nMessages.propTypes = {\n  player: PropTypes.object,\n  messageComp: PropTypes.elementType,\n  filter: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customKey: PropTypes.string\n};\nmodule.exportDefault(filteredMessages(Messages));\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"exit\":{\"ExitSurvey.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/ExitSurvey.jsx                                                                                       //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => ExitSurvey\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nconst Radio = (_ref) => {\n  let {\n    selected,\n    name,\n    value,\n    label,\n    onChange\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"label\", null, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"radio\",\n    name: name,\n    value: value,\n    checked: selected === value,\n    onChange: onChange\n  }), label);\n};\n\nclass ExitSurvey extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      age: \"\",\n      gender: \"\",\n      strength: \"\",\n      fair: \"\",\n      feedback: \"\"\n    };\n\n    this.handleChange = event => {\n      const el = event.currentTarget;\n      this.setState({\n        [el.name]: el.value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      this.props.onSubmit(this.state);\n    };\n  }\n\n  render() {\n    const {\n      player\n    } = this.props;\n    const {\n      age,\n      gender,\n      strength,\n      fair,\n      feedback,\n      education\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"exit-survey\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Exit Survey \"), /*#__PURE__*/React.createElement(\"p\", null, \"Please submit the following code to receive your bonus:\", \" \", /*#__PURE__*/React.createElement(\"strong\", null, player._id), \".\"), /*#__PURE__*/React.createElement(\"p\", null, \"You final \", /*#__PURE__*/React.createElement(\"strong\", null, \"bonus\"), \" is in addition of the\", \" \", /*#__PURE__*/React.createElement(\"strong\", null, \"1 base reward\"), \" for completing the HIT.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, \"Please answer the following short survey. You do not have to provide any information you feel uncomfortable with.\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-line\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"age\"\n    }, \"Age\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"age\",\n      type: \"number\",\n      min: \"0\",\n      max: \"150\",\n      step: \"1\",\n      dir: \"auto\",\n      name: \"age\",\n      value: age,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"gender\"\n    }, \"Gender\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"input\", {\n      id: \"gender\",\n      type: \"text\",\n      dir: \"auto\",\n      name: \"gender\",\n      value: gender,\n      onChange: this.handleChange,\n      autoComplete: \"off\"\n    })))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", null, \"Highest Education Qualification\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"high-school\",\n      label: \"High School\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"bachelor\",\n      label: \"US Bachelor's Degree\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"master\",\n      label: \"Master's or higher\",\n      onChange: this.handleChange\n    }), /*#__PURE__*/React.createElement(Radio, {\n      selected: education,\n      name: \"education\",\n      value: \"other\",\n      label: \"Other\",\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-line thirds\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"strength\"\n    }, \"How would you describe your strength in the game?\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"strength\",\n      name: \"strength\",\n      value: strength,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"fair\"\n    }, \"Do you feel the pay was fair?\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"fair\",\n      name: \"fair\",\n      value: fair,\n      onChange: this.handleChange\n    }))), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"feedback\"\n    }, \"Feedback, including problems you encountered.\"), /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"textarea\", {\n      dir: \"auto\",\n      id: \"feedback\",\n      name: \"feedback\",\n      value: feedback,\n      onChange: this.handleChange\n    })))), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\"))));\n  }\n\n}\n\nExitSurvey.stepName = \"ExitSurvey\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Sorry.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/Sorry.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Sorry\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 1);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 2);\n\nclass Sorry extends Component {\n  render() {\n    const {\n      player,\n      game\n    } = this.props;\n    let msg;\n\n    switch (player.exitStatus) {\n      case \"gameFull\":\n        msg = \"All games you are eligible for have filled up too fast...\";\n        break;\n\n      case \"gameLobbyTimedOut\":\n        msg = \"There were NOT enough players for the game to start...\";\n        break;\n\n      case \"playerEndedLobbyWait\":\n        msg = \"You decided to stop waiting, we are sorry it was too long a wait.\";\n        break;\n\n      default:\n        msg = \"Unfortunately the Game was cancelled...\";\n        break;\n    }\n\n    if (player.exitReason === \"failedQuestion\") {\n      msg = \"Unfortunately you did not meet the conditions required to play the game.\";\n    } // Only for dev\n\n\n    if (!game && Meteor.isDevelopment) {\n      msg = \"Unfortunately the Game was cancelled because of failed to init Game (only visible in development, check the logs).\";\n    }\n\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h4\", null, \"Sorry!\"), /*#__PURE__*/React.createElement(\"p\", null, \"Sorry, you were not able to play today! \", msg), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"strong\", null, \"Please contact the researcher to see if there are more games available.\"))));\n  }\n\n}\n\nSorry.stepName = \"Sorry\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Thanks.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/exit/Thanks.jsx                                                                                           //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Thanks\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass Thanks extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"finished\"\n    }, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h4\", null, \"Finished!\"), /*#__PURE__*/React.createElement(\"p\", null, \"Thank you for participating!\")));\n  }\n\n}\n\nThanks.stepName = \"Thanks\";\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"game\":{\"About.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/About.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => About\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass About extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", null, \"Here be the presentation of the experiement(ers).\");\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"PlayerProfile.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/PlayerProfile.jsx                                                                                    //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => PlayerProfile\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Timer;\nmodule.link(\"./Timer.jsx\", {\n  default(v) {\n    Timer = v;\n  }\n\n}, 1);\n\nclass PlayerProfile extends React.Component {\n  renderProfile() {\n    const {\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-score\"\n    }, /*#__PURE__*/React.createElement(\"h3\", null, \"Your Profile\"), /*#__PURE__*/React.createElement(\"img\", {\n      src: player.get(\"avatar\"),\n      className: \"profile-avatar\"\n    }));\n  }\n\n  renderScore() {\n    const {\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"profile-score\"\n    }, /*#__PURE__*/React.createElement(\"h4\", null, \"Total score\"), /*#__PURE__*/React.createElement(\"span\", null, (player.get(\"score\") || 0).toFixed(2)));\n  }\n\n  render() {\n    const {\n      stage\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"aside\", {\n      className: \"player-profile\"\n    }, this.renderProfile(), this.renderScore(), /*#__PURE__*/React.createElement(Timer, {\n      stage: stage\n    }));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Results.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Results.jsx                                                                                          //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Round\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass Round extends React.Component {\n  render() {\n    const {\n      stage,\n      round,\n      game\n    } = this.props;\n    const result = round.get(\"result\");\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \" Your team was \", result ? \"CORRECT\" : \"INCORRECT\", \" !\"));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Round.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Round.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Round\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet PlayerProfile;\nmodule.link(\"./PlayerProfile.jsx\", {\n  default(v) {\n    PlayerProfile = v;\n  }\n\n}, 1);\nlet SocialExposure;\nmodule.link(\"./SocialExposure.jsx\", {\n  default(v) {\n    SocialExposure = v;\n  }\n\n}, 2);\nlet StageResult;\nmodule.link(\"./StageResult.jsx\", {\n  default(v) {\n    StageResult = v;\n  }\n\n}, 3);\nlet Results;\nmodule.link(\"./Results.jsx\", {\n  default(v) {\n    Results = v;\n  }\n\n}, 4);\nlet Task;\nmodule.link(\"./Task.jsx\", {\n  default(v) {\n    Task = v;\n  }\n\n}, 5);\nlet Timer;\nmodule.link(\"./Timer.jsx\", {\n  default(v) {\n    Timer = v;\n  }\n\n}, 6);\n\nclass Round extends React.Component {\n  render() {\n    const {\n      stage,\n      round,\n      player,\n      game\n    } = this.props; // const showResults = stage.get(\"showResults\");\n    // if (showResults) {\n    //   const result = stage.get(\"result\")\n    //   return (\n    //   <div>\n    //     <StageResult stage={stage} showResults={showResults} result={result} timer={10}/>\n    //   </div>\n    //   )\n    // }\n\n    if (stage.name === \"Result\") {\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(Results, {\n        game: game,\n        round: round,\n        stage: stage\n      }), /*#__PURE__*/React.createElement(Timer, {\n        stage: stage\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"round\"\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"content\"\n      }, /*#__PURE__*/React.createElement(Task, {\n        game: game,\n        round: round,\n        stage: stage,\n        player: player\n      }), /*#__PURE__*/React.createElement(SocialExposure, {\n        game: game,\n        round: round,\n        stage: stage,\n        player: player\n      }), /*#__PURE__*/React.createElement(Timer, {\n        stage: stage\n      })));\n    }\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SocialExposure.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/SocialExposure.jsx                                                                                   //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => SocialExposure\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Chat;\nmodule.link(\"@empirica/chat\", {\n  Chat(v) {\n    Chat = v;\n  }\n\n}, 1);\nlet ChatContainer;\nmodule.link(\"../chat/ChatContainer\", {\n  ChatContainer(v) {\n    ChatContainer = v;\n  }\n\n}, 2);\nlet Message;\nmodule.link(\"../chat/Message.js\", {\n  Message(v) {\n    Message = v;\n  }\n\n}, 3);\nlet TimeSync;\nmodule.link(\"meteor/mizzao:timesync\", {\n  TimeSync(v) {\n    TimeSync = v;\n  }\n\n}, 4);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 5);\nlet Slider;\nmodule.link(\"meteor/empirica:slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 6);\n\nclass SocialExposure extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.logIncomingMessage = (msgs, customKey) => {\n      const {\n        game,\n        round,\n        stage,\n        player\n      } = this.props;\n      const messages = round.get(\"\".concat(customKey));\n      const mostRecentMsg = messages[messages.length - 1];\n      const receiver = mostRecentMsg.player._id; // onIncomingMessage logs the message for both sender and receiver\n      // Only log one copy of the message\n\n      if (player._id === receiver) {\n        stage.append(\"log\", {\n          verb: \"messageLog\",\n          subjectId: player.id,\n          object: mostRecentMsg,\n          at: moment(TimeSync.serverTime(null, 1000))\n        });\n      }\n    };\n  }\n\n  renderSocialInteraction(otherPlayer) {\n    const value = otherPlayer.round.get(\"value\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"alter\",\n      key: otherPlayer._id\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: otherPlayer.get(\"avatar\"),\n      className: \"profile-avatar\"\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"range\"\n    }, /*#__PURE__*/React.createElement(Slider, {\n      min: 0,\n      max: 1,\n      stepSize: 0.01,\n      value: value,\n      disabled: true,\n      hideHandleOnEmpty: true\n    })));\n  }\n\n  render() {\n    const {\n      game,\n      round,\n      player\n    } = this.props;\n    const network = player.get(\"neighbors\"); // reactive time value only updates at 1000 ms\n\n    const timeStamp = new Date(TimeSync.serverTime(null, 1000));\n\n    if (network.length === 0) {\n      return null;\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"social-exposure\"\n    }, network.map(otherNodeId => {\n      var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherNodeId)];\n      pairOfPlayers.sort((p1, p2) => p1 - p2);\n      const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id;\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h2\", null, otherPlayerId), /*#__PURE__*/React.createElement(Chat, {\n        key: otherNodeId,\n        player: player,\n        scope: round,\n        timeStamp: timeStamp,\n        message: Message,\n        onIncomingMessage: this.logIncomingMessage,\n        customKey: \"\".concat(pairOfPlayers[0], \"-\").concat(pairOfPlayers[1])\n      }));\n    }));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"StageResult.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/StageResult.jsx                                                                                      //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => StageResult\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass StageResult extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      counter: props.timer\n    };\n  }\n\n  finishDisplay() {\n    const {\n      stage\n    } = this.props;\n    stage.set(\"resultsShown\", true);\n  }\n\n  render() {\n    if (this.props.showResults) {\n      let x = this;\n      let {\n        counter\n      } = this.state;\n      let timer = setTimeout(function () {\n        if (counter > 0) {\n          x.setState({\n            counter: counter - 1\n          });\n        } else {\n          x.finishDisplay(); // x.props.finishDisplay();\n        }\n      }, 1000);\n      return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h1\", null, \" Your team was \", this.props.result ? \"CORRECT\" : \"INCORRECT\", \" !\"), /*#__PURE__*/React.createElement(\"h3\", null, \" SECONDS LEFT: \", this.state.counter, \" \"));\n    } else {\n      return /*#__PURE__*/React.createElement(\"h1\", null, \" TIME UP \");\n    }\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"SymbolButton.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/SymbolButton.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => SymbolButton\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass SymbolButton extends React.Component {\n  /* \n    @prop id - id of the symbol\n    @prop name - name of the symbol (TESTING PURPOSES)\n  */\n  constructor(props) {\n    super(props);\n\n    this.handleClick = () => {\n      const {\n        game,\n        player,\n        stage,\n        name,\n        handleButtonSelect\n      } = this.props;\n      player.set(\"symbolSelected\", name);\n      handleButtonSelect(name);\n      console.log(\"\".concat(player.get(\"nodeId\"), \" selected \").concat(name));\n    };\n  } // When button is selected, player sets the id of the button he selected\n\n\n  render() {\n    const {\n      game,\n      stage,\n      player,\n      name,\n      selected\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"symbol-container\"\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: selected ? \"symbolButtonSelected\" : \"symbolButtonUnselected\",\n      onClick: this.handleClick\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"images/symbols/tangrams/\".concat(name, \".png\"),\n      height: \"80px\",\n      width: \"80px\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Task.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Task.jsx                                                                                             //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Task\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet TaskResponse;\nmodule.link(\"./TaskResponse\", {\n  default(v) {\n    TaskResponse = v;\n  }\n\n}, 1);\nlet TaskStimulus;\nmodule.link(\"./TaskStimulus\", {\n  default(v) {\n    TaskStimulus = v;\n  }\n\n}, 2);\n\nclass Task extends React.Component {\n  render() {\n    const {\n      stage,\n      player,\n      game\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-container\"\n    }, /*#__PURE__*/React.createElement(TaskResponse, this.props));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TaskResponse.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/TaskResponse.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => TaskResponse\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Slider;\nmodule.link(\"meteor/empirica:slider\", {\n  default(v) {\n    Slider = v;\n  }\n\n}, 1);\nlet TimeSync;\nmodule.link(\"meteor/mizzao:timesync\", {\n  TimeSync(v) {\n    TimeSync = v;\n  }\n\n}, 2);\nlet moment;\nmodule.link(\"moment\", {\n  default(v) {\n    moment = v;\n  }\n\n}, 3);\nlet SymbolButton;\nmodule.link(\"./SymbolButton.jsx\", {\n  default(v) {\n    SymbolButton = v;\n  }\n\n}, 4);\n\nclass TaskResponse extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.handleSubmit = event => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props;\n      event.preventDefault();\n      stage.append(\"log\", {\n        verb: \"playerSubmitted\",\n        subjectId: player.id,\n        object: true,\n        at: moment(TimeSync.serverTime(null, 1000))\n      });\n      player.set(\"submitted\", true);\n    };\n\n    this.handleReconsider = event => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props;\n      event.preventDefault();\n      console.log(\"Reconsidering...\");\n      player.set(\"submitted\", false);\n      stage.append(\"log\", {\n        verb: \"playerReconsidered\",\n        subjectId: player.id,\n        object: true,\n        at: moment(TimeSync.serverTime(null, 1000))\n      }); // this.setState({selectedButton: \"\"});\n    };\n\n    this.handleButtonSelect = symbolName => {\n      const {\n        stage,\n        player,\n        game\n      } = this.props; // stage.set(\"selectedButton\", symbolName);\n\n      this.setState({\n        selectedButton: symbolName\n      });\n      stage.append(\"log\", {\n        verb: \"selectingSymbol\",\n        subjectId: player.id,\n        object: symbolName,\n        at: moment(TimeSync.serverTime(null, 1000))\n      });\n    };\n\n    this.state = {\n      selectedButton: props.player.get(\"symbolSelected\") | \"\"\n    };\n  }\n\n  renderSubmitted() {\n    return /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"h5\", null, \"Waiting on other players...\"), \"Please wait until all players are ready. If you would like to reconsider your answer, click on the reconsider button.\");\n  }\n\n  renderSlider() {\n    const {\n      player\n    } = this.props;\n    const value = player.round.get(\"value\");\n    return /*#__PURE__*/React.createElement(Slider, {\n      min: 0,\n      max: 1,\n      stepSize: 0.01,\n      labelStepSize: 0.25,\n      onChange: this.handleChange,\n      value: value,\n      hideHandleOnEmpty: true\n    });\n  }\n\n  renderButton() {\n    const {\n      stage,\n      player,\n      game\n    } = this.props; // const task = stage.get(\"task\");\n\n    const selectedSymbol = player.get(\"symbolSelected\");\n    const task = player.get(\"\".concat(stage.displayName));\n    return task.map(symbol => /*#__PURE__*/React.createElement(SymbolButton, {\n      key: symbol,\n      name: symbol,\n      handleButtonSelect: symbolName => this.handleButtonSelect(symbolName),\n      selected: selectedSymbol === symbol,\n      stage: stage,\n      game: game,\n      player: player\n    }));\n  }\n\n  render() {\n    const {\n      stage,\n      round,\n      player,\n      game\n    } = this.props;\n    const selected = player.get(\"symbolSelected\");\n    const submitted = player.get(\"submitted\"); // Create a list of dots to show how many players submitted\n\n    const playersSubmitted = round.get(\"numPlayersSubmitted\");\n    const playersNotSubmitted = game.players.length - playersSubmitted;\n    let filledDots = [];\n    let unfilledDots = [];\n\n    for (let i = 0; i < playersSubmitted; i++) {\n      filledDots.push( /*#__PURE__*/React.createElement(\"span\", {\n        className: \"filled-dot\"\n      }));\n    }\n\n    for (let i = 0; i < playersNotSubmitted; i++) {\n      unfilledDots.push( /*#__PURE__*/React.createElement(\"span\", {\n        className: \"empty-dot\"\n      }));\n    } // If the player already submitted, don't show the slider or submit button\n\n\n    const disabled = player.get(\"submitted\");\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-container\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-header\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"header\"\n    }, \" MY CARD\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"submission-dots-container\"\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"header\"\n    }, \" SUBMITTED ANSWERS \"), filledDots, unfilledDots)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response-body\"\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"submission-message-container\"\n    }, submitted ? this.renderSubmitted() : \"\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-response\"\n    }, this.renderButton())), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-container\"\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      style: {\n        opacity: submitted ? 0 : 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: !selected || submitted ? \"arrow-button button-submit-disabled\" : \"arrow-button button-submit\",\n      disabled: !selected || submitted ? true : false,\n      type: \"submit\"\n    }, \" Submit \")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleReconsider,\n      style: {\n        opacity: !submitted ? 0 : 1\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"arrow-button button-reconsider\",\n      disabled: !submitted ? true : false\n    }, \" Reconsider \"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"TaskStimulus.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/TaskStimulus.jsx                                                                                     //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => TaskStimulus\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\n\nclass TaskStimulus extends React.Component {\n  render() {\n    const {\n      stage,\n      player\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"task-stimulus\"\n    }, \"Work with your teammates to find the common symbol.\");\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Timer.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/game/Timer.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet StageTimeWrapper;\nmodule.link(\"meteor/empirica:core\", {\n  StageTimeWrapper(v) {\n    StageTimeWrapper = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nclass timer extends React.Component {\n  render() {\n    const {\n      remainingSeconds\n    } = this.props;\n    const classes = [\"timer\"];\n\n    if (remainingSeconds <= 5) {\n      classes.push(\"lessThan5\");\n    } else if (remainingSeconds <= 10) {\n      classes.push(\"lessThan10\");\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: classes.join(\" \")\n    }, /*#__PURE__*/React.createElement(\"h4\", null, \"Timer\"), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"seconds\"\n    }, remainingSeconds));\n  }\n\n}\n\nmodule.exportDefault(Timer = StageTimeWrapper(timer));\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"intro\":{\"Consent.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/Consent.jsx                                                                                         //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Consent\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered, ConsentButton;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  },\n\n  ConsentButton(v) {\n    ConsentButton = v;\n  }\n\n}, 1);\n\nclass Consent extends React.Component {\n  render() {\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"consent\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Consent Form \"), /*#__PURE__*/React.createElement(\"p\", null, \"This experiment is part of a MIT scientific project. Your decision to participate in this experiment is entirely voluntary. There are no known or anticipated risks to participating in this experiment. There is no way for us to identify you. The only information we will have, in addition to your responses, is the timestamps of your interactions with our site. The results of our research may be presented at scientific meetings or published in scientific journals. Clicking on the \\\"AGREE\\\" button indicates that you are at least 18 years of age, and agree to participate voluntary.\"), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(ConsentButton, {\n      text: \"I AGREE\"\n    })));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InstructionStepOne.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/InstructionStepOne.jsx                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => InstructionStepOne\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass InstructionStepOne extends React.Component {\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev,\n      game\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instructions\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Instructions 1 \"), /*#__PURE__*/React.createElement(\"p\", null, \"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio, animi? Quae autem asperiores officiis voluptatum fuga recusandae minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab, veritatis et labore.\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onNext,\n      disabled: !hasNext\n    }, \"Next\"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"InstructionStepTwo.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/InstructionStepTwo.jsx                                                                              //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => InstructionStepTwo\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass InstructionStepTwo extends React.Component {\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev\n    } = this.props;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"instructions\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Instructions 2 \"), /*#__PURE__*/React.createElement(\"p\", null, \"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio, animi? Quae autem asperiores officiis voluptatum fuga recusandae minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab, veritatis et labore.\"), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Previous\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onNext,\n      disabled: !hasNext\n    }, \"Next\"))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"NewPlayer.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/NewPlayer.jsx                                                                                       //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => NewPlayer\n});\nlet React, Component;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  },\n\n  Component(v) {\n    Component = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass NewPlayer extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      id: \"\"\n    };\n\n    this.handleUpdate = event => {\n      const {\n        value,\n        name\n      } = event.currentTarget;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n      const {\n        handleNewPlayer\n      } = this.props;\n      const {\n        id\n      } = this.state;\n      handleNewPlayer(id);\n    };\n  }\n\n  render() {\n    const {\n      id\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", null, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \"Identification\"), /*#__PURE__*/React.createElement(\"p\", null, \"Please enter your id:\"), /*#__PURE__*/React.createElement(\"input\", {\n      dir: \"auto\",\n      type: \"text\",\n      name: \"id\",\n      id: \"id\",\n      value: id,\n      onChange: this.handleUpdate,\n      required: true,\n      autoComplete: \"off\"\n    }), /*#__PURE__*/React.createElement(\"br\", null), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\")))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"Quiz.jsx\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/intro/Quiz.jsx                                                                                            //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nmodule.export({\n  default: () => Quiz\n});\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 0);\nlet Centered;\nmodule.link(\"meteor/empirica:core\", {\n  Centered(v) {\n    Centered = v;\n  }\n\n}, 1);\n\nclass Quiz extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      sum: \"\",\n      horse: \"\"\n    };\n\n    this.handleChange = event => {\n      const el = event.currentTarget;\n      this.setState({\n        [el.name]: el.value.trim().toLowerCase()\n      });\n    };\n\n    this.handleSubmit = event => {\n      event.preventDefault();\n\n      if (this.state.sum !== \"4\" || this.state.horse !== \"white\") {\n        alert(\"Incorrect! Read the instructions, and please try again.\");\n      } else {\n        this.props.onNext();\n      }\n    };\n  }\n\n  render() {\n    const {\n      hasPrev,\n      hasNext,\n      onNext,\n      onPrev\n    } = this.props;\n    const {\n      sum,\n      horse\n    } = this.state;\n    return /*#__PURE__*/React.createElement(Centered, null, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"quiz\"\n    }, /*#__PURE__*/React.createElement(\"h1\", null, \" Quiz \"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"sum\"\n    }, \"What is 2+2?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      dir: \"auto\",\n      id: \"sum\",\n      name: \"sum\",\n      placeholder: \"e.g. 3\",\n      value: sum,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      required: true\n    })), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"horse\"\n    }, \"What color was Napoleon's white horse?\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      dir: \"auto\",\n      id: \"horse\",\n      name: \"horse\",\n      placeholder: \"e.g. brown\",\n      value: horse,\n      onChange: this.handleChange,\n      autoComplete: \"off\",\n      required: true\n    })), /*#__PURE__*/React.createElement(\"p\", null, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: onPrev,\n      disabled: !hasPrev\n    }, \"Back to instructions\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\"\n    }, \"Submit\")))));\n  }\n\n}\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}},\"main.js\":function module(require,exports,module){\n\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                  //\n// client/main.js                                                                                                   //\n//                                                                                                                  //\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                    //\nlet Empirica;\nmodule.link(\"meteor/empirica:core\", {\n  default(v) {\n    Empirica = v;\n  }\n\n}, 0);\nlet render;\nmodule.link(\"react-dom\", {\n  render(v) {\n    render = v;\n  }\n\n}, 1);\nlet ExitSurvey;\nmodule.link(\"./exit/ExitSurvey\", {\n  default(v) {\n    ExitSurvey = v;\n  }\n\n}, 2);\nlet Thanks;\nmodule.link(\"./exit/Thanks\", {\n  default(v) {\n    Thanks = v;\n  }\n\n}, 3);\nlet Sorry;\nmodule.link(\"./exit/Sorry\", {\n  default(v) {\n    Sorry = v;\n  }\n\n}, 4);\nlet About;\nmodule.link(\"./game/About\", {\n  default(v) {\n    About = v;\n  }\n\n}, 5);\nlet Round;\nmodule.link(\"./game/Round\", {\n  default(v) {\n    Round = v;\n  }\n\n}, 6);\nlet Consent;\nmodule.link(\"./intro/Consent\", {\n  default(v) {\n    Consent = v;\n  }\n\n}, 7);\nlet InstructionStepOne;\nmodule.link(\"./intro/InstructionStepOne\", {\n  default(v) {\n    InstructionStepOne = v;\n  }\n\n}, 8);\nlet InstructionStepTwo;\nmodule.link(\"./intro/InstructionStepTwo\", {\n  default(v) {\n    InstructionStepTwo = v;\n  }\n\n}, 9);\nlet Quiz;\nmodule.link(\"./intro/Quiz\", {\n  default(v) {\n    Quiz = v;\n  }\n\n}, 10);\nlet NewPlayer;\nmodule.link(\"./intro/NewPlayer\", {\n  default(v) {\n    NewPlayer = v;\n  }\n\n}, 11);\n// Set the About Component you want to use for the About dialog (optional).\nEmpirica.about(About); // Set the Consent Component you want to present players (optional).\n\nEmpirica.consent(Consent); // Set the component for getting the player id (optional)\n\nEmpirica.newPlayer(NewPlayer); // Introduction pages to show before they play the game (optional).\n// At this point they have been assigned a treatment. You can return\n// different instruction steps depending on the assigned treatment.\n\nEmpirica.introSteps((game, treatment) => {\n  const steps = [InstructionStepOne];\n\n  if (treatment.playerCount > 1) {\n    steps.push(InstructionStepTwo);\n  }\n\n  steps.push(Quiz);\n  return steps;\n}); // The Round component containing the game UI logic.\n// This is where you will be doing the most development.\n// See client/game/Round.jsx to learn more.\n\nEmpirica.round(Round); // End of Game pages. These may vary depending on player or game information.\n// For example we can show the score of the user, or we can show them a\n// different message if they actually could not participate the game (timed\n// out), etc.\n// The last step will be the last page shown to user and will be shown to the\n// user if they come back to the website.\n// If you don't return anything, or do not define this function, a default\n// exit screen will be shown.\n\nEmpirica.exitSteps((game, player) => {\n  if (!game || player.exitStatus && player.exitStatus !== \"finished\" && player.exitReason !== \"playerQuit\") {\n    return [Sorry];\n  }\n\n  return [ExitSurvey, Thanks];\n}); // Start the app render tree.\n// NB: This must be called after any other Empirica calls (Empirica.round(),\n// Empirica.introSteps(), ...).\n// It is required and usually does not need changing.\n\nMeteor.startup(() => {\n  render(Empirica.routes(), document.getElementById(\"app\"));\n});\n//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\",\n    \".html\",\n    \".mjs\",\n    \".less\",\n    \".jsx\"\n  ]\n});\n\nvar exports = require(\"/client/main.js\");","hash":"e551edb58847b6dac4be2179a3d1f983e98d5b6b","servePath":"/app.js","sourceMap":{"version":3,"sources":["client/chat/ChatContainer.js","client/chat/ErrorBoundary.js","client/chat/Footer.js","client/chat/Message.js","client/chat/Messages.js","client/exit/ExitSurvey.jsx","client/exit/Sorry.jsx","client/exit/Thanks.jsx","client/game/About.jsx","client/game/PlayerProfile.jsx","client/game/Results.jsx","client/game/Round.jsx","client/game/SocialExposure.jsx","client/game/StageResult.jsx","client/game/SymbolButton.jsx","client/game/Task.jsx","client/game/TaskResponse.jsx","client/game/TaskStimulus.jsx","client/game/Timer.jsx","client/intro/Consent.jsx","client/intro/InstructionStepOne.jsx","client/intro/InstructionStepTwo.jsx","client/intro/NewPlayer.jsx","client/intro/Quiz.jsx","client/main.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","export","ChatContainer","PropTypes","React","Footer","Message","Messages","ErrorBoundary","PureComponent","state","isOpen","onClick","setState","onNewMessage","msg","scope","customKey","props","append","componentDidMount","dockStartOpen","docked","render","player","customClassName","onIncomingMessage","filter","timeStamp","header","HeaderComp","message","MessageComp","footer","FooterComp","rest","common","defaultProps","hideAvatar","hideName","svgAvatar","hideNotificiationBadge","propTypes","object","isRequired","string","instanceOf","Date","bool","func","elementType","Component","constructor","hasError","getDerivedStateFromError","error","componentDidCatch","errorInfo","console","children","_objectSpread","comment","rows","minRows","maxRows","buttonHeight","handleSubmit","e","preventDefault","text","trim","_id","avatar","get","name","handleChange","el","currentTarget","textareaLineHeight","previousRows","target","currentRows","scrollHeight","scrollTop","usedRows","value","document","getElementById","offsetHeight","key","height","isString","renderTime","hours","getHours","minutes","getMinutes","time","toString","padStart","renderName","isSelf","msgPlayer","avatarImg","useAvatar","log","warn","avatarSrc","svg","src","__html","alt","getTime","shape","self","filteredMessages","WrappedComponent","messages","messagesEl","createRef","messageLength","current","length","componentDidUpdate","prevProps","currentMessages","splice","messageComp","map","i","exportDefault","ExitSurvey","Centered","Radio","selected","label","onChange","age","gender","strength","fair","feedback","event","onSubmit","education","stepName","Sorry","Meteor","game","exitStatus","exitReason","isDevelopment","Thanks","About","PlayerProfile","Timer","renderProfile","renderScore","toFixed","stage","Round","round","result","SocialExposure","StageResult","Results","Task","Chat","TimeSync","moment","Slider","logIncomingMessage","msgs","mostRecentMsg","receiver","verb","subjectId","id","at","serverTime","renderSocialInteraction","otherPlayer","network","otherNodeId","pairOfPlayers","parseInt","sort","p1","p2","otherPlayerId","players","find","p","counter","timer","finishDisplay","set","showResults","x","setTimeout","SymbolButton","handleClick","handleButtonSelect","TaskResponse","TaskStimulus","handleReconsider","symbolName","selectedButton","renderSubmitted","renderSlider","renderButton","selectedSymbol","task","displayName","symbol","submitted","playersSubmitted","playersNotSubmitted","filledDots","unfilledDots","push","disabled","opacity","StageTimeWrapper","remainingSeconds","classes","join","Consent","ConsentButton","InstructionStepOne","hasPrev","hasNext","onNext","onPrev","InstructionStepTwo","NewPlayer","handleUpdate","handleNewPlayer","Quiz","sum","horse","toLowerCase","alert","Empirica","about","consent","newPlayer","introSteps","treatment","steps","playerCount","exitSteps","startup","routes"],"mappings":"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","file":"/app.js","sourcesContent":["import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Footer from \"./Footer\";\nimport Message from \"./Message\";\nimport Messages from \"./Messages\";\nimport ErrorBoundary from \"./ErrorBoundary\";\n\nexport default class ChatContainer extends React.PureComponent {\n  state = { isOpen: true };\n\n  onClick = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onNewMessage = (msg) => {\n    const { onNewMessage, scope, customKey } = this.props;\n\n    if (onNewMessage) {\n      msg = onNewMessage(msg);\n      if (!msg) {\n        return;\n      }\n    }\n\n    scope.append(customKey, msg);\n  };\n\n  componentDidMount = () => {\n    const { dockStartOpen, docked } = this.props;\n    if (docked && !dockStartOpen) {\n      this.setState({\n        isOpen: false,\n      });\n    }\n  };\n\n  render() {\n    const { isOpen } = this.state;\n    const {\n      player,\n      scope,\n      customKey,\n      customClassName,\n      docked,\n      onIncomingMessage,\n\n      filter,\n      timeStamp,\n\n      header: HeaderComp,\n      message: MessageComp,\n      footer: FooterComp,\n      ...rest\n    } = this.props;\n\n    const common = { player, scope, customKey };\n\n    return (\n      <ErrorBoundary>\n        <div\n          className={`${\n            customClassName ? customClassName : \"empirica-chat-container\"\n          } ${docked ? \"docked\" : \"undocked\"}`}\n        >\n          <div className={`chat ${isOpen ? \"open\" : \"\"}`}>\n            {docked && (\n              <HeaderComp {...common} onClick={this.onClick} isOpen={isOpen} />\n            )}\n            {isOpen ? (\n              <>\n                <Messages\n                  {...common}\n                  messageComp={MessageComp}\n                  filter={filter}\n                  onIncomingMessage={onIncomingMessage}\n                  {...rest}\n                />\n                <FooterComp\n                  {...common}\n                  timeStamp={timeStamp}\n                  onNewMessage={this.onNewMessage}\n                />\n              </>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  header: ({ onClick, isOpen }) => (\n    <div className=\"header\">\n      <span className=\"title\">CHAT </span>\n      <span className=\"close-button\" onClick={onClick}>\n        {isOpen ? \"-\" : \"+\"}\n      </span>\n    </div>\n  ),\n  message: Message,\n  footer: Footer,\n};\n\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired,\n};\n","import React from \"react\";\n\nexport default class ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, errorInfo) {\n    console.error(\"error on chat package \", error);\n    console.error(\"error on chat package:info \", errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <h1>Something went wrong.</h1>;\n    }\n\n    return this.props.children;\n  }\n}\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport default class Footer extends React.Component {\n  state = { comment: \"\", rows: 1, minRows: 1, maxRows: 5, buttonHeight: 30 };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const text = this.state.comment.trim();\n    if (text === \"\") {\n      return;\n    }\n\n    const { player, onNewMessage, timeStamp } = this.props;\n\n    let msg = {\n      text,\n      player: {\n        _id: player._id,\n        avatar: player.get(\"avatar\"),\n        name: player.get(\"name\") || player._id,\n      },\n    };\n\n    if (timeStamp) {\n      msg = { ...msg, timeStamp };\n    }\n\n    onNewMessage(msg);\n\n    this.setState({ comment: \"\" });\n  };\n\n  handleChange = (e) => {\n    const el = e.currentTarget;\n    const textareaLineHeight = 24;\n    const { minRows, maxRows } = this.state;\n\n    const previousRows = e.target.rows;\n    e.target.rows = minRows; // reset number of rows in textarea\n    const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n    if (currentRows === previousRows) {\n      e.target.rows = currentRows;\n    }\n\n    if (currentRows >= maxRows) {\n      e.target.rows = maxRows;\n      e.target.scrollTop = e.target.scrollHeight;\n    }\n\n    const usedRows = currentRows < maxRows ? currentRows : maxRows;\n\n    this.setState(\n      {\n        [el.name]: el.value,\n        rows: usedRows,\n      },\n      () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight,\n        });\n      }\n    );\n  };\n\n  render() {\n    const { comment, rows, buttonHeight } = this.state;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"chat-footer\">\n          <textarea\n            id=\"chat-input\"\n            name=\"comment\"\n            className=\"chat-input\"\n            placeholder=\"Enter chat message\"\n            value={comment}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                this.handleSubmit(e);\n              }\n            }}\n            rows={rows}\n            onChange={this.handleChange}\n            autoComplete=\"off\"\n          />\n          <button\n            type=\"submit\"\n            style={{ height: buttonHeight }}\n            className=\"chat-button-send\"\n            disabled={!comment}\n          >\n            Send\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date),\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { isString } from 'lodash';\n\n\nexport default class Message extends React.Component {\n  renderTime = (timeStamp) => {\n    const hours = new Date(timeStamp).getHours();\n    const minutes = new Date(timeStamp).getMinutes();\n\n    if (!hours || !minutes) {\n      return null;\n    }\n\n    const time = `${hours\n      .toString()\n      .padStart(2, 0)}:${minutes.toString().padStart(2, 0)}`;\n\n    return <div className=\"timeStamp\">{time}</div>;\n  };\n\n  renderName = (isSelf, name) => {\n    return <div className=\"name\">{isSelf ? \"You\" : name}</div>;\n  };\n\n  render() {\n    const { message, player, hideName, hideAvatar, svgAvatar, avatar } = this.props;\n    const { player: msgPlayer, text, timeStamp } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar)\n    console.log(isSelf);\n    if (useAvatar && avatar){\n      if (isString(avatar)){\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\")\n        avatarImg = <img className=\"avatar\" alt={''} src={avatar} />\n      }\n      else{\n        const avatarSrc = avatar.svg || avatar.src\n        if (avatar.svg) {\n          avatarImg = <div\n            dangerouslySetInnerHTML={{ __html: avatarSrc }}\n            className=\"avatar\"\n          />\n        } else{\n          avatarImg = <img className=\"avatar\" alt={avatar.alt} src={avatar.src} />\n        }\n      }\n    }\n\n\n    return (\n      <div className=\"message\">\n        {useAvatar ? avatarImg : ''}\n        <div className={\"text-container-self\"}>\n          {!hideName && this.renderName(isSelf, msgPlayer.name)}\n          <div className=\"text\">{text}</div>\n          {timeStamp &&\n            new Date(timeStamp).getTime() > 0 &&\n            this.renderTime(timeStamp)}\n        </div>\n      </div>\n    );\n  }\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string,\n    }),\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg:  PropTypes.string,\n    src:  PropTypes.string,\n    alt:  PropTypes.string,\n  }),\n};\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nfunction filteredMessages(WrappedComponent) {\n  return class extends React.Component {\n    render() {\n      const { scope, customKey, filter } = this.props;\n      let messages = scope.get(customKey) || [];\n      if (filter) {\n        messages = filter(messages);\n      }\n\n      return <WrappedComponent messages={[...messages]} {...this.props} />;\n    }\n  };\n}\n\nclass Messages extends React.Component {\n  constructor(props) {\n    super(props);\n    this.messagesEl = React.createRef();\n    this.state = {\n      messageLength: 0,\n    };\n  }\n\n  componentDidMount() {\n    this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n    this.setState({ messageLength: this.props.messages.length });\n  }\n\n  componentDidUpdate(prevProps) {\n    const { messageLength } = this.state;\n    const {\n      messages: currentMessages,\n      onIncomingMessage,\n      customKey,\n    } = this.props;\n\n    if (\n      this.messagesEl.current !== null &&\n      currentMessages.length > messageLength\n    ) {\n      this.setState({ messageLength: currentMessages.length }, () => {\n        if (onIncomingMessage) {\n          onIncomingMessage(\n            currentMessages.splice(this.state.messageLength),\n            customKey\n          );\n        }\n\n        this.messagesEl.current.scrollTop = this.messagesEl.current.scrollHeight;\n      });\n    }\n  }\n\n  render() {\n    const { player, messages, messageComp: MessageComp, ...rest } = this.props;\n\n    return (\n      <div className=\"messages\" ref={this.messagesEl}>\n        {messages.length === 0 ? (\n          <div className=\"empty\">No messages yet...</div>\n        ) : null}\n        {messages.map((message, i) => {\n          return (\n            <MessageComp key={i} message={message} player={player} {...rest} />\n          );\n        })}\n      </div>\n    );\n  }\n}\n\nMessages.propTypes = {\n  player: PropTypes.object,\n  messageComp: PropTypes.elementType,\n  filter: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customKey: PropTypes.string,\n};\n\nexport default filteredMessages(Messages);\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nconst Radio = ({ selected, name, value, label, onChange }) => (\n  <label>\n    <input\n      type=\"radio\"\n      name={name}\n      value={value}\n      checked={selected === value}\n      onChange={onChange}\n    />\n    {label}\n  </label>\n);\n\nexport default class ExitSurvey extends React.Component {\n  static stepName = \"ExitSurvey\";\n  state = { age: \"\", gender: \"\", strength: \"\", fair: \"\", feedback: \"\" };\n\n  handleChange = event => {\n    const el = event.currentTarget;\n    this.setState({ [el.name]: el.value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n    this.props.onSubmit(this.state);\n  };\n\n  render() {\n    const { player } = this.props;\n    const { age, gender, strength, fair, feedback, education } = this.state;\n\n    return (\n      <Centered>\n        <div className=\"exit-survey\">\n          <h1> Exit Survey </h1>\n          <p>\n            Please submit the following code to receive your bonus:{\" \"}\n            <strong>{player._id}</strong>.\n          </p>\n          <p>\n            You final <strong>bonus</strong> is in addition of the{\" \"}\n            <strong>1 base reward</strong> for completing the HIT.\n          </p>\n          <br />\n          <p>\n            Please answer the following short survey. You do not have to provide\n            any information you feel uncomfortable with.\n          </p>\n          <form onSubmit={this.handleSubmit}>\n            <div className=\"form-line\">\n              <div>\n                <label htmlFor=\"age\">Age</label>\n                <div>\n                  <input\n                    id=\"age\"\n                    type=\"number\"\n                    min=\"0\"\n                    max=\"150\"\n                    step=\"1\"\n                    dir=\"auto\"\n                    name=\"age\"\n                    value={age}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"gender\">Gender</label>\n                <div>\n                  <input\n                    id=\"gender\"\n                    type=\"text\"\n                    dir=\"auto\"\n                    name=\"gender\"\n                    value={gender}\n                    onChange={this.handleChange}\n                    autoComplete=\"off\"\n                  />\n                </div>\n              </div>\n            </div>\n\n            <div>\n              <label>Highest Education Qualification</label>\n              <div>\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"high-school\"\n                  label=\"High School\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"bachelor\"\n                  label=\"US Bachelor's Degree\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"master\"\n                  label=\"Master's or higher\"\n                  onChange={this.handleChange}\n                />\n                <Radio\n                  selected={education}\n                  name=\"education\"\n                  value=\"other\"\n                  label=\"Other\"\n                  onChange={this.handleChange}\n                />\n              </div>\n            </div>\n\n            <div className=\"form-line thirds\">\n              <div>\n                <label htmlFor=\"strength\">\n                  How would you describe your strength in the game?\n                </label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"strength\"\n                    name=\"strength\"\n                    value={strength}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"fair\">Do you feel the pay was fair?</label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"fair\"\n                    name=\"fair\"\n                    value={fair}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n              <div>\n                <label htmlFor=\"feedback\">\n                  Feedback, including problems you encountered.\n                </label>\n                <div>\n                  <textarea\n                    dir=\"auto\"\n                    id=\"feedback\"\n                    name=\"feedback\"\n                    value={feedback}\n                    onChange={this.handleChange}\n                  />\n                </div>\n              </div>\n            </div>\n\n            <button type=\"submit\">Submit</button>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Meteor } from \"meteor/meteor\";\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Sorry extends Component {\n    static stepName = \"Sorry\";\n\n    render() {\n        const { player, game } = this.props;\n        let msg;\n        switch (player.exitStatus) {\n            case \"gameFull\":\n                msg = \"All games you are eligible for have filled up too fast...\";\n                break;\n            case \"gameLobbyTimedOut\":\n                msg = \"There were NOT enough players for the game to start...\";\n                break;\n            case \"playerEndedLobbyWait\":\n                msg =\n                    \"You decided to stop waiting, we are sorry it was too long a wait.\";\n                break;\n            default:\n                msg = \"Unfortunately the Game was cancelled...\";\n                break;\n        }\n        if (player.exitReason === \"failedQuestion\") {\n            msg =\n                \"Unfortunately you did not meet the conditions required to play the game.\";\n        }\n        // Only for dev\n        if (!game && Meteor.isDevelopment) {\n            msg =\n                \"Unfortunately the Game was cancelled because of failed to init Game (only visible in development, check the logs).\";\n        }\n        return (\n            <Centered>\n                <div>\n                    <h4>Sorry!</h4>\n                    <p>Sorry, you were not able to play today! {msg}</p>\n                    <p>\n                        <strong>Please contact the researcher to see if there are more games available.</strong>\n                    </p>\n                </div>\n            </Centered>\n        );\n    }\n}","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Thanks extends React.Component {\n  static stepName = \"Thanks\";\n  render() {\n    return (\n      <div className=\"finished\">\n        <div>\n          <h4>Finished!</h4>\n          <p>Thank you for participating!</p>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class About extends React.Component {\n  render() {\n    return <div>Here be the presentation of the experiement(ers).</div>;\n  }\n}\n","import React from \"react\";\n\nimport Timer from \"./Timer.jsx\";\n\nexport default class PlayerProfile extends React.Component {\n  renderProfile() {\n    const { player } = this.props;\n    return (\n      <div className=\"profile-score\">\n        <h3>Your Profile</h3>\n        <img src={player.get(\"avatar\")} className=\"profile-avatar\" />\n      </div>\n    );\n  }\n\n  renderScore() {\n    const { player } = this.props;\n    return (\n      <div className=\"profile-score\">\n        <h4>Total score</h4>\n        <span>{(player.get(\"score\") || 0).toFixed(2)}</span>\n      </div>\n    );\n  }\n\n  render() {\n    const { stage } = this.props;\n\n    return (\n      <aside className=\"player-profile\">\n        {this.renderProfile()}\n        {this.renderScore()}\n        <Timer stage={stage} />\n      </aside>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class Round extends React.Component {\n\n  render() {\n    const { stage, round, game } = this.props;\n    const result = round.get(\"result\");\n      \n    return (\n        <div>\n            <h1> Your team was {result ? \"CORRECT\" : \"INCORRECT\"} !</h1>\n        </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport PlayerProfile from \"./PlayerProfile.jsx\";\nimport SocialExposure from \"./SocialExposure.jsx\";\nimport StageResult from \"./StageResult.jsx\";\nimport Results from \"./Results.jsx\";\nimport Task from \"./Task.jsx\";\nimport Timer from \"./Timer.jsx\";\n\nexport default class Round extends React.Component {\n\n  render() {\n    const { stage, round, player, game } = this.props;\n    // const showResults = stage.get(\"showResults\");\n\n    // if (showResults) {\n    //   const result = stage.get(\"result\")\n    //   return (\n    //   <div>\n    //     <StageResult stage={stage} showResults={showResults} result={result} timer={10}/>\n    //   </div>\n    //   )\n    // }\n\n    if (stage.name === \"Result\") {\n      return (\n        <div>\n          <Results game={game} round={round} stage={stage}/> \n          <Timer stage={stage}/>\n        </div>\n      )\n    } else {\n      \n      return (\n        <div className=\"round\">\n          <div className=\"content\">\n            {/* <PlayerProfile player={player} stage={stage} game={game} /> */}\n            <Task game={game} round={round} stage={stage} player={player} />\n            <SocialExposure game={game} round={round} stage={stage} player={player} />\n            <Timer stage={stage} />\n          </div>\n        </div>\n      );\n    }\n  } \n}\n","import React from \"react\";\nimport { Chat } from \"@empirica/chat\";\nimport { ChatContainer } from \"../chat/ChatContainer\";\nimport { Message } from \"../chat/Message.js\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport moment from \"moment\";\nimport Slider from \"meteor/empirica:slider\";\n\n\nexport default class SocialExposure extends React.Component {\n  renderSocialInteraction(otherPlayer) {\n    const value = otherPlayer.round.get(\"value\");\n    return (\n      <div className=\"alter\" key={otherPlayer._id}>\n        <img src={otherPlayer.get(\"avatar\")} className=\"profile-avatar\" />\n        <div className=\"range\">\n          <Slider\n            min={0}\n            max={1}\n            stepSize={0.01}\n            value={value}\n            disabled\n            hideHandleOnEmpty\n          />\n        </div>\n      </div>\n    );\n  }\n\n  logIncomingMessage = (msgs, customKey) => {\n    const {game, round, stage, player} = this.props;\n\n    const messages = round.get(`${customKey}`)\n    const mostRecentMsg = messages[messages.length -1];\n    const receiver = mostRecentMsg.player._id;\n\n    // onIncomingMessage logs the message for both sender and receiver\n    // Only log one copy of the message\n    if (player._id === receiver) {\n      stage.append(\"log\", {\n        verb: \"messageLog\",\n        subjectId: player.id,\n        object: mostRecentMsg,\n        at: moment(TimeSync.serverTime(null, 1000)),\n      })\n    }\n  }\n\n  render() {\n    const { game, round, player } = this.props;\n\n    const network = player.get(\"neighbors\");\n    // reactive time value only updates at 1000 ms\n    const timeStamp = new Date(TimeSync.serverTime(null, 1000));\n\n    if (network.length === 0) {\n      return null;\n    }\n\n    return (\n      <div className=\"social-exposure\">\n        {/* <p>\n          <strong>There are {network.length} other players:</strong>\n        </p> */}\n        {/* {otherPlayers.map(p => this.renderSocialInteraction(p))} */}\n        {/* <Chat player={player} scope={round} /> */}\n\n        {network.map(otherNodeId => {\n          var pairOfPlayers = [player.get(\"nodeId\"), parseInt(otherNodeId)];\n          pairOfPlayers.sort((p1,p2) => p1 - p2);\n          const otherPlayerId = game.players.find(p => p.get(\"nodeId\") === parseInt(otherNodeId)).id\n          return (\n            <div>\n              <h2>{otherPlayerId}</h2>\n              <Chat\n                key={otherNodeId}\n                player={player}\n                scope={round}  \n                timeStamp={timeStamp}\n                message={Message}\n                onIncomingMessage={this.logIncomingMessage}           \n                customKey={`${pairOfPlayers[0]}-${pairOfPlayers[1]}`}\n              />\n              {/* <ChatContainer\n                key={otherNodeId}\n                player={player}\n                scope={round}  \n                timeStamp={timeStamp}\n                onIncomingMessage={this.logIncomingMessage}           \n                customKey={`${pairOfPlayers[0]}-${pairOfPlayers[1]}`}\n              /> */}\n            </div>\n            )\n          }\n        )}\n\n      </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class StageResult extends React.Component {\n\n  constructor(props) {\n      super(props);\n      this.state = {\n          counter: props.timer\n      }\n  }\n\n  finishDisplay() {\n    const { stage } = this.props;\n    stage.set(\"resultsShown\", true);\n  }\n\n  render() {\n\n    if (this.props.showResults) {\n        let x = this;\n        let { counter } = this.state;\n\n        let timer = setTimeout(function () {\n            if (counter > 0) {\n                x.setState({counter: counter - 1});\n            } else {\n                x.finishDisplay();\n                // x.props.finishDisplay();\n            }\n        }, 1000);\n\n        return (\n            <div>\n                <h1> Your team was {this.props.result ? \"CORRECT\" : \"INCORRECT\"} !</h1>\n                <h3> SECONDS LEFT: {this.state.counter} </h3>\n            </div>\n            )\n    } else {\n        return <h1> TIME UP </h1>\n    }\n  }\n}\n","import React from 'react';\nexport default class SymbolButton extends React.Component {\n/* \n  @prop id - id of the symbol\n  @prop name - name of the symbol (TESTING PURPOSES)\n*/\n  constructor(props) {\n      super(props);\n  }\n\n  // When button is selected, player sets the id of the button he selected\n  handleClick = () => {\n      const { game, player, stage, name, handleButtonSelect } = this.props;\n      player.set(\"symbolSelected\", name);\n      handleButtonSelect(name);\n      console.log(`${player.get(\"nodeId\")} selected ${name}`);\n  }\n\n  render() {\n    const { game, stage, player, name, selected} = this.props;\n\n\n    return (\n      <div className=\"symbol-container\">\n        <button className={selected ? \"symbolButtonSelected\" : \"symbolButtonUnselected\"} onClick={this.handleClick}>\n            <img src={`images/symbols/tangrams/${name}.png`} height=\"80px\" width=\"80px\"/>\n        </button>\n     </div>\n    );\n  }\n}\n","import React from \"react\";\n\nimport TaskResponse from \"./TaskResponse\";\nimport TaskStimulus from \"./TaskStimulus\";\n\nexport default class Task extends React.Component {\n  render() {\n    const { stage, player, game } = this.props;\n\n    return (\n      <div className=\"task-container\">\n        {/* <TaskStimulus {...this.props} /> */}\n        <TaskResponse {...this.props} />\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport Slider from \"meteor/empirica:slider\";\nimport { TimeSync } from \"meteor/mizzao:timesync\";\nimport moment from \"moment\";\n\nimport SymbolButton from \"./SymbolButton.jsx\";\n\nexport default class TaskResponse extends React.Component {\n  constructor(props) {\n    super(props);  \n    this.state = {\n      selectedButton: props.player.get(\"symbolSelected\") | \"\",\n    }\n  }\n\n  handleSubmit = event => {\n    const { stage, player, game } = this.props;\n\n    event.preventDefault();\n\n    stage.append(\"log\", {\n      verb: \"playerSubmitted\",\n      subjectId: player.id,\n      object: true,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    })\n    player.set(\"submitted\", true);\n  };\n\n  handleReconsider = event => {\n    const { stage, player, game } = this.props;\n\n    event.preventDefault();\n    console.log(\"Reconsidering...\");\n    player.set(\"submitted\", false);\n\n    stage.append(\"log\", {\n      verb: \"playerReconsidered\",\n      subjectId: player.id,\n      object: true,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    })\n\n    // this.setState({selectedButton: \"\"});\n\n  }\n\n  handleButtonSelect= (symbolName) => {\n    const { stage, player, game } = this.props;\n    // stage.set(\"selectedButton\", symbolName);\n    this.setState({selectedButton: symbolName});\n\n    stage.append(\"log\", {\n      verb: \"selectingSymbol\",\n      subjectId: player.id,\n      object: symbolName,\n      at: moment(TimeSync.serverTime(null, 1000)),\n    });\n\n  }\n\n  renderSubmitted() {\n    return (\n      <div>\n        <h5>Waiting on other players...</h5>\n        Please wait until all players are ready. If you would like to reconsider your answer, click on the reconsider button.\n      </div>\n    );\n  }\n\n  renderSlider() {\n    const { player } = this.props;\n    const value = player.round.get(\"value\");\n    return (\n      <Slider\n        min={0}\n        max={1}\n        stepSize={0.01}\n        labelStepSize={0.25}\n        onChange={this.handleChange}\n        value={value}\n        hideHandleOnEmpty\n      />\n    );\n  }\n\n  renderButton() {\n    const { stage, player, game } = this.props;\n    // const task = stage.get(\"task\");\n    const selectedSymbol = player.get(\"symbolSelected\")\n    const task = player.get(`${stage.displayName}`)\n    return (\n      task.map((symbol) => \n      <SymbolButton \n        key={symbol}\n        name={symbol}\n        handleButtonSelect={(symbolName) => this.handleButtonSelect(symbolName)}\n        selected={selectedSymbol === symbol}\n        stage={stage}\n        game={game}\n        player={player}\n      />\n      )\n    );\n  }\n\n  render() {\n    const { stage, round, player, game } = this.props;\n\n\n    const selected = player.get(\"symbolSelected\")\n    const submitted = player.get(\"submitted\");\n\n    // Create a list of dots to show how many players submitted\n    const playersSubmitted = round.get(\"numPlayersSubmitted\");\n    const playersNotSubmitted = game.players.length - playersSubmitted;\n    let filledDots = [];\n    let unfilledDots = [];\n    for (let i = 0; i < playersSubmitted; i++) {\n      filledDots.push(<span className=\"filled-dot\"></span>)\n    }\n    for (let i = 0; i < playersNotSubmitted; i++) {\n      unfilledDots.push(<span className=\"empty-dot\"></span>)\n    }\n\n    // If the player already submitted, don't show the slider or submit button\n    \n    const disabled = player.get(\"submitted\");\n    return (\n      <div className=\"task-response-container\">\n        <div className=\"task-response-header\">\n          <p className=\"header\"> MY CARD</p>\n          <div className=\"submission-dots-container\">\n            <p className=\"header\"> SUBMITTED ANSWERS </p>\n            {filledDots}\n            {unfilledDots}\n          </div>\n        </div>\n        <div className=\"task-response-body\">\n          <div className=\"submission-message-container\">\n            {submitted ? this.renderSubmitted() : \"\"}\n          </div>\n          <div className=\"task-response\">\n              {this.renderButton()}\n          </div>\n        </div>\n        {/* {!submitted ? \n            <form onSubmit={this.handleSubmit}>\n              <button className=\"button button-submit\" disabled={submitted ? true : false} type=\"submit\"> Submit </button> \n            </form>\n          :\n            <button className=\"button button-b button-reconsider\" disabled={!submitted ? true : false} onClick={this.handleReconsider}> Reconsider </button> \n        } */}\n          <div className=\"button-container\">\n              <form onSubmit={this.handleSubmit} style={{opacity: submitted ? 0 : 1}}>\n                <button \n                  className={!selected || submitted ? \"arrow-button button-submit-disabled\" : \"arrow-button button-submit\"} \n                  disabled= {!selected || submitted ? true : false} type=\"submit\"> Submit </button> \n              </form>\n              <form onSubmit={this.handleReconsider} style={{opacity: !submitted ? 0 : 1}}>\n                <button className=\"arrow-button button-reconsider\" disabled={!submitted ? true : false}> Reconsider </button> \n              </form>\n          </div>\n\n        </div>\n    );\n  }\n}\n","import React from \"react\";\n\nexport default class TaskStimulus extends React.Component {\n  render() {\n    const { stage, player } = this.props;\n\n    return (\n      <div className=\"task-stimulus\">\n        Work with your teammates to find the common symbol.\n      </div>\n    );\n  }\n}\n","import { StageTimeWrapper } from \"meteor/empirica:core\";\nimport React from \"react\";\n\nclass timer extends React.Component {\n  render() {\n    const { remainingSeconds } = this.props;\n    const classes = [\"timer\"];\n    if (remainingSeconds <= 5) {\n      classes.push(\"lessThan5\");\n    } else if (remainingSeconds <= 10) {\n      classes.push(\"lessThan10\");\n    }\n\n    return (\n      <div className={classes.join(\" \")}>\n        <h4>Timer</h4>\n        <span className=\"seconds\">{remainingSeconds}</span>\n      </div>\n    );\n  }\n}\n\nexport default (Timer = StageTimeWrapper(timer));\n","import React from \"react\";\n\nimport { Centered, ConsentButton } from \"meteor/empirica:core\";\n\nexport default class Consent extends React.Component {\n  render() {\n    return (\n      <Centered>\n        <div className=\"consent\">\n          <h1> Consent Form </h1>\n          <p>\n            This experiment is part of a MIT scientific project. Your decision\n            to participate in this experiment is entirely voluntary. There are\n            no known or anticipated risks to participating in this experiment.\n            There is no way for us to identify you. The only information we will\n            have, in addition to your responses, is the timestamps of your\n            interactions with our site. The results of our research may be\n            presented at scientific meetings or published in scientific\n            journals. Clicking on the \"AGREE\" button indicates that you are at\n            least 18 years of age, and agree to participate voluntary.\n          </p>\n          <br />\n          <ConsentButton text=\"I AGREE\" />\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class InstructionStepOne extends React.Component {\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev, game } = this.props;\n\n    return (\n      <Centered>\n        <div className=\"instructions\">\n          <h1> Instructions 1 </h1>\n          <p>\n            Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio,\n            animi? Quae autem asperiores officiis voluptatum fuga recusandae\n            minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab,\n            veritatis et labore.\n          </p>\n\n          <p>\n            <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n              Previous\n            </button>\n            <button type=\"button\" onClick={onNext} disabled={!hasNext}>\n              Next\n            </button>\n          </p>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class InstructionStepTwo extends React.Component {\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev } = this.props;\n    return (\n      <Centered>\n        <div className=\"instructions\">\n          <h1> Instructions 2 </h1>\n          <p>\n            Lorem ipsum dolor sit amet consectetur, adipisicing elit. Optio,\n            animi? Quae autem asperiores officiis voluptatum fuga recusandae\n            minima! Animi pariatur ex sapiente laborum. Ipsa quo quia ab,\n            veritatis et labore.\n          </p>\n\n          <p>\n            <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n              Previous\n            </button>\n            <button type=\"button\" onClick={onNext} disabled={!hasNext}>\n              Next\n            </button>\n          </p>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class NewPlayer extends Component {\n  state = { id: \"\" };\n\n  handleUpdate = event => {\n    const { value, name } = event.currentTarget;\n    this.setState({ [name]: value });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    const { handleNewPlayer } = this.props;\n    const { id } = this.state;\n    handleNewPlayer(id);\n  };\n\n  render() {\n    const { id } = this.state;\n\n    return (\n      <Centered>\n        <div >\n          <form onSubmit={this.handleSubmit}>\n            <h1>Identification</h1>\n\n            <p>\n              Please enter your id:\n                        </p>\n\n            <input\n              dir=\"auto\"\n              type=\"text\"\n              name=\"id\"\n              id=\"id\"\n              value={id}\n              onChange={this.handleUpdate}\n              required\n              autoComplete=\"off\"\n            />\n\n            <br />\n\n            <p>\n              <button type=\"submit\">Submit</button>\n            </p>\n\n          </form>\n        </div>\n      </Centered>\n    )\n  }\n}","import React from \"react\";\n\nimport { Centered } from \"meteor/empirica:core\";\n\nexport default class Quiz extends React.Component {\n  state = { sum: \"\", horse: \"\" };\n\n  handleChange = event => {\n    const el = event.currentTarget;\n    this.setState({ [el.name]: el.value.trim().toLowerCase() });\n  };\n\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.sum !== \"4\" || this.state.horse !== \"white\") {\n      alert(\"Incorrect! Read the instructions, and please try again.\");\n    } else {\n      this.props.onNext();\n    }\n  };\n\n  render() {\n    const { hasPrev, hasNext, onNext, onPrev } = this.props;\n    const { sum, horse } = this.state;\n    return (\n      <Centered>\n        <div className=\"quiz\">\n          <h1> Quiz </h1>\n          <form onSubmit={this.handleSubmit}>\n            <p>\n              <label htmlFor=\"sum\">What is 2+2?</label>\n              <input\n                type=\"text\"\n                dir=\"auto\"\n                id=\"sum\"\n                name=\"sum\"\n                placeholder=\"e.g. 3\"\n                value={sum}\n                onChange={this.handleChange}\n                autoComplete=\"off\"\n                required\n              />\n            </p>\n            <p>\n              <label htmlFor=\"horse\">\n                What color was Napoleon's white horse?\n              </label>\n              <input\n                type=\"text\"\n                dir=\"auto\"\n                id=\"horse\"\n                name=\"horse\"\n                placeholder=\"e.g. brown\"\n                value={horse}\n                onChange={this.handleChange}\n                autoComplete=\"off\"\n                required\n              />\n            </p>\n\n            <p>\n              <button type=\"button\" onClick={onPrev} disabled={!hasPrev}>\n                Back to instructions\n              </button>\n              <button type=\"submit\">Submit</button>\n            </p>\n          </form>\n        </div>\n      </Centered>\n    );\n  }\n}\n","import Empirica from \"meteor/empirica:core\";\nimport { render } from \"react-dom\";\nimport ExitSurvey from \"./exit/ExitSurvey\";\nimport Thanks from \"./exit/Thanks\";\nimport Sorry from \"./exit/Sorry\";\nimport About from \"./game/About\";\nimport Round from \"./game/Round\";\nimport Consent from \"./intro/Consent\";\nimport InstructionStepOne from \"./intro/InstructionStepOne\";\nimport InstructionStepTwo from \"./intro/InstructionStepTwo\";\nimport Quiz from \"./intro/Quiz\";\nimport NewPlayer from \"./intro/NewPlayer\";\n\n\n// Set the About Component you want to use for the About dialog (optional).\nEmpirica.about(About);\n\n// Set the Consent Component you want to present players (optional).\nEmpirica.consent(Consent);\n\n// Set the component for getting the player id (optional)\nEmpirica.newPlayer(NewPlayer);\n\n// Introduction pages to show before they play the game (optional).\n// At this point they have been assigned a treatment. You can return\n// different instruction steps depending on the assigned treatment.\nEmpirica.introSteps((game, treatment) => {\n  const steps = [InstructionStepOne];\n  if (treatment.playerCount > 1) {\n    steps.push(InstructionStepTwo);\n  }\n  steps.push(Quiz);\n  return steps;\n});\n\n// The Round component containing the game UI logic.\n// This is where you will be doing the most development.\n// See client/game/Round.jsx to learn more.\nEmpirica.round(Round);\n\n// End of Game pages. These may vary depending on player or game information.\n// For example we can show the score of the user, or we can show them a\n// different message if they actually could not participate the game (timed\n// out), etc.\n// The last step will be the last page shown to user and will be shown to the\n// user if they come back to the website.\n// If you don't return anything, or do not define this function, a default\n// exit screen will be shown.\nEmpirica.exitSteps((game, player) => {\n  if (\n    !game ||\n    (player.exitStatus &&\n      player.exitStatus !== \"finished\" &&\n      player.exitReason !== \"playerQuit\")\n  ) {\n    return [Sorry];\n  }\n  return [ExitSurvey, Thanks];\n});\n\n// Start the app render tree.\n// NB: This must be called after any other Empirica calls (Empirica.round(),\n// Empirica.introSteps(), ...).\n// It is required and usually does not need changing.\nMeteor.startup(() => {\n  render(Empirica.routes(), document.getElementById(\"app\"));\n});\n"]}}]