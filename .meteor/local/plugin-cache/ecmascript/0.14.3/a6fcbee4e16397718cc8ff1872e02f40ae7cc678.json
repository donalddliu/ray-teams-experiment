{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/donaldliu/Documents/ray-experiment/client/chat/Footer.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/chat/Footer.js","filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/Footer.js","passPerPreset":false,"envName":"development","cwd":"/Users/donaldliu/Documents/ray-experiment","root":"/Users/donaldliu/Documents/ray-experiment","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/Footer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/chat/Footer.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nmodule.export({\n  default: () => Footer\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\n\nclass Footer extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      comment: \"\",\n      rows: 1,\n      minRows: 1,\n      maxRows: 5,\n      buttonHeight: 30\n    };\n\n    this.handleSubmit = e => {\n      e.preventDefault();\n      const text = this.state.comment.trim();\n\n      if (text === \"\") {\n        return;\n      }\n\n      const {\n        player,\n        onNewMessage,\n        timeStamp\n      } = this.props;\n      let msg = {\n        text,\n        player: {\n          _id: player._id,\n          avatar: player.get(\"avatar\"),\n          name: player.get(\"name\") || player._id\n        }\n      };\n\n      if (timeStamp) {\n        msg = _objectSpread({}, msg, {\n          timeStamp\n        });\n      }\n\n      onNewMessage(msg);\n      this.setState({\n        comment: \"\"\n      });\n    };\n\n    this.handleChange = e => {\n      const el = e.currentTarget;\n      const textareaLineHeight = 24;\n      const {\n        minRows,\n        maxRows\n      } = this.state;\n      const previousRows = e.target.rows;\n      e.target.rows = minRows; // reset number of rows in textarea\n\n      const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n      if (currentRows === previousRows) {\n        e.target.rows = currentRows;\n      }\n\n      if (currentRows >= maxRows) {\n        e.target.rows = maxRows;\n        e.target.scrollTop = e.target.scrollHeight;\n      }\n\n      const usedRows = currentRows < maxRows ? currentRows : maxRows;\n      this.setState({\n        [el.name]: el.value,\n        rows: usedRows\n      }, () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight\n        });\n      });\n    };\n  }\n\n  render() {\n    const {\n      comment,\n      rows,\n      buttonHeight\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"chat-footer\"\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      id: \"chat-input\",\n      name: \"comment\",\n      className: \"chat-input\",\n      placeholder: \"Enter chat message\",\n      value: comment,\n      onKeyPress: e => {\n        if (e.key === \"Enter\") {\n          this.handleSubmit(e);\n        }\n      },\n      rows: rows,\n      onChange: this.handleChange,\n      autoComplete: \"off\"\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      style: {\n        height: buttonHeight\n      },\n      className: \"chat-button-send\",\n      disabled: !comment\n    }, \"Send\")));\n  }\n\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date)\n};","map":{"version":3,"sources":["client/chat/Footer.js"],"names":["_objectSpread","module","link","default","v","export","Footer","PropTypes","React","Component","state","comment","rows","minRows","maxRows","buttonHeight","handleSubmit","e","preventDefault","text","trim","player","onNewMessage","timeStamp","props","msg","_id","avatar","get","name","setState","handleChange","el","currentTarget","textareaLineHeight","previousRows","target","currentRows","scrollHeight","scrollTop","usedRows","value","document","getElementById","offsetHeight","render","key","height","propTypes","object","isRequired","scope","customKey","string","func","instanceOf","Date"],"mappings":"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","sourcesContent":["import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nexport default class Footer extends React.Component {\n  state = { comment: \"\", rows: 1, minRows: 1, maxRows: 5, buttonHeight: 30 };\n\n  handleSubmit = (e) => {\n    e.preventDefault();\n    const text = this.state.comment.trim();\n    if (text === \"\") {\n      return;\n    }\n\n    const { player, onNewMessage, timeStamp } = this.props;\n\n    let msg = {\n      text,\n      player: {\n        _id: player._id,\n        avatar: player.get(\"avatar\"),\n        name: player.get(\"name\") || player._id,\n      },\n    };\n\n    if (timeStamp) {\n      msg = { ...msg, timeStamp };\n    }\n\n    onNewMessage(msg);\n\n    this.setState({ comment: \"\" });\n  };\n\n  handleChange = (e) => {\n    const el = e.currentTarget;\n    const textareaLineHeight = 24;\n    const { minRows, maxRows } = this.state;\n\n    const previousRows = e.target.rows;\n    e.target.rows = minRows; // reset number of rows in textarea\n    const currentRows = ~~(e.target.scrollHeight / textareaLineHeight);\n\n    if (currentRows === previousRows) {\n      e.target.rows = currentRows;\n    }\n\n    if (currentRows >= maxRows) {\n      e.target.rows = maxRows;\n      e.target.scrollTop = e.target.scrollHeight;\n    }\n\n    const usedRows = currentRows < maxRows ? currentRows : maxRows;\n\n    this.setState(\n      {\n        [el.name]: el.value,\n        rows: usedRows,\n      },\n      () => {\n        this.setState({\n          buttonHeight: document.getElementById(\"chat-input\").offsetHeight,\n        });\n      }\n    );\n  };\n\n  render() {\n    const { comment, rows, buttonHeight } = this.state;\n\n    return (\n      <form onSubmit={this.handleSubmit}>\n        <div className=\"chat-footer\">\n          <textarea\n            id=\"chat-input\"\n            name=\"comment\"\n            className=\"chat-input\"\n            placeholder=\"Enter chat message\"\n            value={comment}\n            onKeyPress={(e) => {\n              if (e.key === \"Enter\") {\n                this.handleSubmit(e);\n              }\n            }}\n            rows={rows}\n            onChange={this.handleChange}\n            autoComplete=\"off\"\n          />\n          <button\n            type=\"submit\"\n            style={{ height: buttonHeight }}\n            className=\"chat-button-send\"\n            disabled={!comment}\n          >\n            Send\n          </button>\n        </div>\n      </form>\n    );\n  }\n}\n\nFooter.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  onNewMessage: PropTypes.func,\n  timeStamp: PropTypes.instanceOf(Date),\n};\n"]},"sourceType":"module","hash":"a6fcbee4e16397718cc8ff1872e02f40ae7cc678"}
