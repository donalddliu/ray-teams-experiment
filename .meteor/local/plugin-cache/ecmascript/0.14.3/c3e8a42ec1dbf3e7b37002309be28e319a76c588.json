{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/donaldliu/Documents/ray-experiment/client/chat/ChatContainer.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"client/chat/ChatContainer.js","filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/ChatContainer.js","passPerPreset":false,"envName":"development","cwd":"/Users/donaldliu/Documents/ray-experiment","root":"/Users/donaldliu/Documents/ray-experiment","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/ChatContainer.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/chat/ChatContainer.js"}},"code":"var _extends;\n\nmodule.link(\"@babel/runtime/helpers/extends\", {\n  default: function (v) {\n    _extends = v;\n  }\n}, 0);\n\nvar _objectWithoutProperties;\n\nmodule.link(\"@babel/runtime/helpers/objectWithoutProperties\", {\n  default: function (v) {\n    _objectWithoutProperties = v;\n  }\n}, 1);\n\nvar _createSuper;\n\nmodule.link(\"@babel/runtime/helpers/createSuper\", {\n  default: function (v) {\n    _createSuper = v;\n  }\n}, 2);\n\nvar _inheritsLoose;\n\nmodule.link(\"@babel/runtime/helpers/inheritsLoose\", {\n  default: function (v) {\n    _inheritsLoose = v;\n  }\n}, 3);\nmodule.export({\n  \"default\": function () {\n    return ChatContainer;\n  }\n});\nmodule.link(\"./style.less\");\nvar PropTypes;\nmodule.link(\"prop-types\", {\n  \"default\": function (v) {\n    PropTypes = v;\n  }\n}, 0);\nvar React;\nmodule.link(\"react\", {\n  \"default\": function (v) {\n    React = v;\n  }\n}, 1);\nvar Footer;\nmodule.link(\"./Footer\", {\n  \"default\": function (v) {\n    Footer = v;\n  }\n}, 2);\nvar Message;\nmodule.link(\"./Message\", {\n  \"default\": function (v) {\n    Message = v;\n  }\n}, 3);\nvar Messages;\nmodule.link(\"./Messages\", {\n  \"default\": function (v) {\n    Messages = v;\n  }\n}, 4);\nvar ChatHeader;\nmodule.link(\"./ChatHeader\", {\n  \"default\": function (v) {\n    ChatHeader = v;\n  }\n}, 5);\nvar ErrorBoundary;\nmodule.link(\"./ErrorBoundary\", {\n  \"default\": function (v) {\n    ErrorBoundary = v;\n  }\n}, 6);\n\nvar ChatContainer = /*#__PURE__*/function (_React$PureComponent) {\n  _inheritsLoose(ChatContainer, _React$PureComponent);\n\n  var _super = _createSuper(ChatContainer);\n\n  function ChatContainer() {\n    var _this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _React$PureComponent.call.apply(_React$PureComponent, [this].concat(args)) || this;\n    _this.state = {\n      isOpen: true\n    };\n\n    _this.onClick = function () {\n      _this.setState({\n        isOpen: !_this.state.isOpen\n      });\n    };\n\n    _this.onNewMessage = function (msg) {\n      var _this$props = _this.props,\n          onNewMessage = _this$props.onNewMessage,\n          scope = _this$props.scope,\n          customKey = _this$props.customKey;\n\n      if (onNewMessage) {\n        msg = onNewMessage(msg);\n\n        if (!msg) {\n          return;\n        }\n      }\n\n      scope.append(customKey, msg);\n    };\n\n    _this.componentDidMount = function () {\n      var _this$props2 = _this.props,\n          dockStartOpen = _this$props2.dockStartOpen,\n          docked = _this$props2.docked;\n\n      if (docked && !dockStartOpen) {\n        _this.setState({\n          isOpen: false\n        });\n      }\n    };\n\n    return _this;\n  }\n\n  var _proto = ChatContainer.prototype;\n\n  _proto.render = function () {\n    function render() {\n      var isOpen = this.state.isOpen;\n\n      var _this$props3 = this.props,\n          player = _this$props3.player,\n          scope = _this$props3.scope,\n          customKey = _this$props3.customKey,\n          customClassName = _this$props3.customClassName,\n          docked = _this$props3.docked,\n          onIncomingMessage = _this$props3.onIncomingMessage,\n          filter = _this$props3.filter,\n          timeStamp = _this$props3.timeStamp,\n          HeaderComp = _this$props3.header,\n          MessageComp = _this$props3.message,\n          FooterComp = _this$props3.footer,\n          rest = _objectWithoutProperties(_this$props3, [\"player\", \"scope\", \"customKey\", \"customClassName\", \"docked\", \"onIncomingMessage\", \"filter\", \"timeStamp\", \"header\", \"message\", \"footer\"]);\n\n      var common = {\n        player: player,\n        scope: scope,\n        customKey: customKey\n      };\n      return /*#__PURE__*/React.createElement(ErrorBoundary, null, /*#__PURE__*/React.createElement(\"div\", {\n        className: (customClassName ? customClassName : \"empirica-chat-container\") + \" \" + (docked ? \"undocked\" : \"undocked\")\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"chat \" + (isOpen ? \"open\" : \"\")\n      }, docked && /*#__PURE__*/React.createElement(HeaderComp, _extends({}, common, {\n        onClick: this.onClick,\n        isOpen: isOpen\n      })), isOpen ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Messages, _extends({}, common, {\n        messageComp: MessageComp,\n        filter: filter,\n        onIncomingMessage: onIncomingMessage\n      }, rest)), /*#__PURE__*/React.createElement(FooterComp, _extends({}, common, {\n        timeStamp: timeStamp,\n        onNewMessage: this.onNewMessage\n      }))) : \"\")));\n    }\n\n    return render;\n  }();\n\n  return ChatContainer;\n}(React.PureComponent);\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  // header: ({ onClick, isOpen }) => (\n  //   <div className=\"header\">\n  //     <span className=\"title\">CHAT </span>\n  //     <span className=\"close-button\" onClick={onClick}>\n  //       {isOpen ? \"-\" : \"+\"}\n  //     </span>\n  //   </div>\n  // ),\n  message: Message,\n  footer: Footer\n};\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired\n};","map":{"version":3,"sources":["client/chat/ChatContainer.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","_createSuper","_inheritsLoose","export","ChatContainer","PropTypes","React","Footer","Message","Messages","ChatHeader","ErrorBoundary","state","isOpen","onClick","setState","onNewMessage","msg","props","scope","customKey","append","componentDidMount","dockStartOpen","docked","render","player","customClassName","onIncomingMessage","filter","timeStamp","HeaderComp","header","MessageComp","message","FooterComp","footer","rest","common","PureComponent","defaultProps","hideAvatar","hideName","svgAvatar","hideNotificiationBadge","propTypes","object","isRequired","string","instanceOf","Date","bool","func","elementType"],"mappings":"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","sourcesContent":["import \"./style.less\";\n\nimport PropTypes from \"prop-types\";\nimport React from \"react\";\nimport Footer from \"./Footer\";\nimport Message from \"./Message\";\nimport Messages from \"./Messages\";\nimport ChatHeader from \"./ChatHeader\";\nimport ErrorBoundary from \"./ErrorBoundary\";\n\nexport default class ChatContainer extends React.PureComponent {\n  state = { isOpen: true };\n\n  onClick = () => {\n    this.setState({ isOpen: !this.state.isOpen });\n  };\n\n  onNewMessage = (msg) => {\n    const { onNewMessage, scope, customKey } = this.props;\n\n    if (onNewMessage) {\n      msg = onNewMessage(msg);\n      if (!msg) {\n        return;\n      }\n    }\n\n    scope.append(customKey, msg);\n  };\n\n  componentDidMount = () => {\n    const { dockStartOpen, docked } = this.props;\n    if (docked && !dockStartOpen) {\n      this.setState({\n        isOpen: false,\n      });\n    }\n  };\n\n  render() {\n    const { isOpen } = this.state;\n    const {\n      player,\n      scope,\n      customKey,\n      customClassName,\n      docked,\n      onIncomingMessage,\n\n      filter,\n      timeStamp,\n\n      header: HeaderComp,\n      message: MessageComp,\n      footer: FooterComp,\n      ...rest\n    } = this.props;\n\n    const common = { player, scope, customKey };\n\n    return (\n      <ErrorBoundary>\n        <div\n          className={`${\n            customClassName ? customClassName : \"empirica-chat-container\"\n          } ${docked ? \"undocked\" : \"undocked\"}`}\n        >\n          <div className={`chat ${isOpen ? \"open\" : \"\"}`}>\n            {docked && (\n              <HeaderComp {...common} onClick={this.onClick} isOpen={isOpen} />\n            )}\n            {isOpen ? (\n              <>\n                <Messages\n                  {...common}\n                  messageComp={MessageComp}\n                  filter={filter}\n                  onIncomingMessage={onIncomingMessage}\n                  {...rest}\n                />\n                <FooterComp\n                  {...common}\n                  timeStamp={timeStamp}\n                  onNewMessage={this.onNewMessage}\n                />\n              </>\n            ) : (\n              \"\"\n            )}\n          </div>\n        </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nChatContainer.defaultProps = {\n  customKey: \"chat\",\n  docked: false,\n  customClassName: \"\",\n  dockStartOpen: true,\n  hideAvatar: false,\n  hideName: false,\n  svgAvatar: false,\n  hideNotificiationBadge: false,\n  // header: ({ onClick, isOpen }) => (\n  //   <div className=\"header\">\n  //     <span className=\"title\">CHAT </span>\n  //     <span className=\"close-button\" onClick={onClick}>\n  //       {isOpen ? \"-\" : \"+\"}\n  //     </span>\n  //   </div>\n  // ),\n  message: Message,\n  footer: Footer,\n};\n\nChatContainer.propTypes = {\n  player: PropTypes.object.isRequired,\n  scope: PropTypes.object.isRequired,\n  customKey: PropTypes.string.isRequired,\n  timeStamp: PropTypes.instanceOf(Date),\n  docked: PropTypes.bool,\n  dockStartOpen: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  customClassName: PropTypes.string,\n\n  onNewMessage: PropTypes.func,\n  onIncomingMessage: PropTypes.func,\n  filter: PropTypes.func,\n\n  header: PropTypes.elementType.isRequired,\n  message: PropTypes.elementType.isRequired,\n  footer: PropTypes.elementType.isRequired,\n};\n"]},"sourceType":"module","hash":"c3e8a42ec1dbf3e7b37002309be28e319a76c588"}
