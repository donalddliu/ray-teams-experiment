{"metadata":{},"options":{"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/donaldliu/Documents/ray-experiment/client/chat/Message.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"client/chat/Message.js","filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/Message.js","passPerPreset":false,"envName":"development","cwd":"/Users/donaldliu/Documents/ray-experiment","root":"/Users/donaldliu/Documents/ray-experiment","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"CallExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"MemberExpression":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true,"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.9.2","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"Program":{"enter":[null],"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":{},"_verified":{},"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/donaldliu/Documents/ray-experiment/client/chat/Message.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"client/chat/Message.js"}},"code":"module.export({\n  default: () => Message\n});\nlet PropTypes;\nmodule.link(\"prop-types\", {\n  default(v) {\n    PropTypes = v;\n  }\n\n}, 0);\nlet React;\nmodule.link(\"react\", {\n  default(v) {\n    React = v;\n  }\n\n}, 1);\nlet isString;\nmodule.link(\"lodash\", {\n  isString(v) {\n    isString = v;\n  }\n\n}, 2);\n\nclass Message extends React.Component {\n  constructor() {\n    super(...arguments);\n\n    this.renderTime = timeStamp => {\n      const hours = new Date(timeStamp).getHours();\n      const minutes = new Date(timeStamp).getMinutes();\n\n      if (!hours || !minutes) {\n        return null;\n      }\n\n      const time = \"\".concat(hours.toString().padStart(2, 0), \":\").concat(minutes.toString().padStart(2, 0));\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"timeStamp\"\n      }, time);\n    };\n\n    this.renderName = (isSelf, name) => {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"name\"\n      }, isSelf ? \"You\" : name);\n    };\n  }\n\n  render() {\n    const {\n      message,\n      player,\n      hideName,\n      hideAvatar,\n      svgAvatar,\n      avatar\n    } = this.props;\n    const {\n      player: msgPlayer,\n      text,\n      timeStamp\n    } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar);\n\n    if (useAvatar && avatar) {\n      if (isString(avatar)) {\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\");\n        avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n          className: \"avatar\",\n          alt: '',\n          src: avatar\n        });\n      } else {\n        const avatarSrc = avatar.svg || avatar.src;\n\n        if (avatar.svg) {\n          avatarImg = /*#__PURE__*/React.createElement(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: avatarSrc\n            },\n            className: \"avatar\"\n          });\n        } else {\n          avatarImg = /*#__PURE__*/React.createElement(\"img\", {\n            className: \"avatar\",\n            alt: avatar.alt,\n            src: avatar.src\n          });\n        }\n      }\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"message\"\n    }, useAvatar ? avatarImg : '', /*#__PURE__*/React.createElement(\"div\", {\n      className: isSelf ? \"text-container-self\" : \"text-container-other\"\n    }, !hideName && this.renderName(isSelf, msgPlayer.name), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"text\"\n    }, text), timeStamp && new Date(timeStamp).getTime() > 0 && this.renderTime(timeStamp)));\n  }\n\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string\n    })\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg: PropTypes.string,\n    src: PropTypes.string,\n    alt: PropTypes.string\n  })\n};","map":{"version":3,"sources":["client/chat/Message.js"],"names":["module","export","default","Message","PropTypes","link","v","React","isString","Component","renderTime","timeStamp","hours","Date","getHours","minutes","getMinutes","time","toString","padStart","renderName","isSelf","name","render","message","player","hideName","hideAvatar","svgAvatar","avatar","props","msgPlayer","text","_id","avatarImg","useAvatar","console","warn","avatarSrc","svg","src","__html","alt","getTime","propTypes","shape","string","isRequired","self","bool"],"mappings":"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","sourcesContent":["import PropTypes from \"prop-types\";\nimport React from \"react\";\nimport { isString } from 'lodash';\n\n\nexport default class Message extends React.Component {\n  renderTime = (timeStamp) => {\n    const hours = new Date(timeStamp).getHours();\n    const minutes = new Date(timeStamp).getMinutes();\n\n    if (!hours || !minutes) {\n      return null;\n    }\n\n    const time = `${hours\n      .toString()\n      .padStart(2, 0)}:${minutes.toString().padStart(2, 0)}`;\n\n    return <div className=\"timeStamp\">{time}</div>;\n  };\n\n  renderName = (isSelf, name) => {\n    return <div className=\"name\">{isSelf ? \"You\" : name}</div>;\n  };\n\n  render() {\n    const { message, player, hideName, hideAvatar, svgAvatar, avatar } = this.props;\n    const { player: msgPlayer, text, timeStamp } = message;\n    const isSelf = player._id == msgPlayer._id;\n    let avatarImg;\n    const useAvatar = !hideAvatar && (svgAvatar || avatar)\n    if (useAvatar && avatar){\n      if (isString(avatar)){\n        console.warn(\"Deprecation: avatar should be an object containing a src or svg property\")\n        avatarImg = <img className=\"avatar\" alt={''} src={avatar} />\n      }\n      else{\n        const avatarSrc = avatar.svg || avatar.src\n        if (avatar.svg) {\n          avatarImg = <div\n            dangerouslySetInnerHTML={{ __html: avatarSrc }}\n            className=\"avatar\"\n          />\n        } else{\n          avatarImg = <img className=\"avatar\" alt={avatar.alt} src={avatar.src} />\n        }\n      }\n    }\n\n\n    return (\n      <div className=\"message\">\n        {useAvatar ? avatarImg : ''}\n        <div className={isSelf ? \"text-container-self\" : \"text-container-other\"}>\n          {!hideName && this.renderName(isSelf, msgPlayer.name)}\n          <div className=\"text\">{text}</div>\n          {timeStamp &&\n            new Date(timeStamp).getTime() > 0 &&\n            this.renderTime(timeStamp)}\n        </div>\n      </div>\n    );\n  }\n}\n\nMessage.propTypes = {\n  message: PropTypes.shape({\n    text: PropTypes.string.isRequired,\n    player: PropTypes.shape({\n      name: PropTypes.string.isRequired,\n      avatar: PropTypes.string,\n    }),\n  }).isRequired,\n  self: PropTypes.bool,\n  hideAvatar: PropTypes.bool,\n  hideName: PropTypes.bool,\n  svgAvatar: PropTypes.bool,\n  avatar: PropTypes.shape({\n    svg:  PropTypes.string,\n    src:  PropTypes.string,\n    alt:  PropTypes.string,\n  }),\n};\n"]},"sourceType":"module","hash":"1d2965e4be0b9a2c94bf062b00eb69e8cfc6c24c"}
